<!DOCTYPE html>
<html lang="en">

<head>

  <title>Fish head curry recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="I have fond memories of eating fish curry from the Banana Leaf Apolo in Singapore, where we would all go out as a family for Sunday lunch and feast on fish head curry served on a banana leaf. Us kids would be both freaked out by the fish heads, but at the same time fight over...
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Fish head curry recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/singaporean-fish-curry/ ">
  <meta property="og:description" content="I have fond memories of eating fish curry from the Banana Leaf Apolo in Singapore, where we would all go out as a family for Sunday lunch and feast on fish head curry served on a banana leaf. Us kids would be both freaked out by the fish heads, but at the same time fight over...
">
  <meta property="og:image" content="/images/recipes/fish-curry.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/singaporean-fish-curry/ ">
  <meta name="twitter:title" content="Fish head curry recipe | josh iza.ac">
  <meta name="twitter:description" content="I have fond memories of eating fish curry from the Banana Leaf Apolo in Singapore, where we would all go out as a family for Sunday lunch and feast on fish head curry served on a banana leaf. Us kids would be both freaked out by the fish heads, but at the same time fight over...
">
  <meta name="twitter:image" content="/images/recipes/fish-curry.jpg">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Fish head curry",
          "image": [
            "../..//images/recipes/fish-curry.jpg"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-18 00:00:00+08:00",
          "description": "I have fond memories of eating fish curry from the Banana Leaf Apolo in Singapore, where we would all go out as a family for Sunday lunch and feast on fish...",

          "totalTime": "PT1 hour",

          "recipeYield": "3-4 servings servings",

          "recipeIngredient": [
            "1 flaky white fish",
            "3 tsp tamarind paste",
            "1.5 tbsp rice (or 1/2 tbsp rice flour)",
            "1/4 cup oil",
            "1/2 tbsp mustard seeds",
            "1 tsp fenugreek seeds",
            "12 curry leaves",
            "1 brown onion",
            "1 eggplant (Indian, cut into thin wedges)",
            "6 okra (ladies’ fingers)",
            "2 tomatoes (cut into cubes or eighths)",
            "1 tbsp sugar (ideally palm sugar, gula melaka)",
            "1 tbsp salt",
            "1/2 cup coconut milk (optional)",
            "8 garlic cloves",
            "3 shallots",
            "10 chilli peppers (dried or fresh)",
            "50 g curry powder",
            "1 inch ginger",
            "1 inch galangal",
            "2 lemongrass stalks",
            "1/2 tsp or 10 cloves",
            "1/2 tsp or 20 black peppercorns",
            "4 whole cardamom pods",
            "1 cinnamon stick",
            "4 whole dried chilies or 1 tsp chilli powder",
            "4 tbsp coriander seeds",
            "2 tbsp cumin seeds",
            "1 tsp fennel seeds"
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "In advance make the curry powder by toasting the spices for 3-5 minutes, and then grinding them in a spice grinder or mortar and pestle. Repeat until it is sufficiently fine. Similarly, prepare the rice flour by toasting the rice in a dry frying pan over medium heat, and grinding it to a fine powder."
            },
            {
              "@type": "HowToStep",
              "text": "Add 1.5 teaspoons of tamarind paste into a bowl filled with 100 ml water. Mix well. Pour the tamarind solution onto the fish and let it rest for 10 minutes."
            },
            {
              "@type": "HowToStep",
              "text": "Blend garlic, shallot, ginger, galangal, lemongrass, curry powder, and either soaked and deseeded dried chillies or fresh chillies. Set aside."
            },
            {
              "@type": "HowToStep",
              "text": "Heat the oil at medium heat. Sautés sliced onion until fragrant before adding curry leaves. Add mustard seeds and fenugreek seeds. Continue sautéing until mustard seeds begin to pop. Add the blended ingredients and cook for several minutes until they darken."
            },
            {
              "@type": "HowToStep",
              "text": "Add the curry paste to the wok and fry. When oil begins to separate from the ingredients, add pounded toasted rice and 700ml water to the wok (can optionally remove some of the water and add coconut milk at this stage). Increase heat to the maximum."
            },
            {
              "@type": "HowToStep",
              "text": "Once curry boils vigorously, add fish, eggplant, ladies’ fingers and tomatoes. Reduce heat to the minimum and let it simmer until fish is cooked. It should take about 8 to 10 minutes if fish is around 1 kg."
            },
            {
              "@type": "HowToStep",
              "text": "Remove fish from curry once it is cooked. Leave aside. Add the remaining 1.5 tsp of the tamarind paste, 1 tbsp sugar, and 1 tbsp salt (or to taste). Continue simmering for the next 40 minutes with the lid on or until curry thickens."
            },
            {
              "@type": "HowToStep",
              "text": "Add fish head and the rest of the meat into curry. Increase the heat to allow it to boil. Once it boils, switch off the stove. Serve fish head curry with steamed white rice."
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">


<article class="recipe-container">

    <header class="recipe-header">

        <div class="hero-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/recipes/fish-curry.jpg');">
            <h1 class="recipe-title hero-text">Fish head curry</h1>
        </div>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>1 hour</span>
                <span>MAKES</span><span id="servings-badge" data-original="3-4 servings"><span class="scalable" data-base="3.0">3</span>-<span class="scalable" data-base="4.0">4</span> servings</span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/singaporean-fish-curry.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>I have fond memories of eating fish curry from the <a href="https://www.instagram.com/thebananaleafapolo/?hl=en">Banana Leaf Apolo</a> in Singapore, where we would all go out as a family for Sunday lunch and feast on fish head curry served on a banana leaf. Us kids would be both freaked out by the fish heads, but at the same time fight over the delicacies of the fish eyes. Adapted from <a href="https://www.nyonyacooking.com/recipes/fish-head-curry~HyPIdPjvf5-Q">Nyonya Cooking</a>.</p>
<p>The curry sauce also goes great with <a href="/recipes/roti-prata/" class="component-link">roti prata</a>, especially for breakfast.</p>

        </div>
    </header>


    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<ul>
<li><span class="scalable" data-base="1.0">1</span> flaky white fish</li>
<li><span class="scalable" data-base="3.0">3</span> tsp tamarind paste</li>
<li><span class="scalable" data-base="1.5">1.5</span> tbsp rice <span class="paren">(or <span class="scalable" data-base="0.5">1/2</span> tbsp rice flour)</span></li>
<li><span class="scalable" data-base="0.25">1/4</span> cup oil</li>
<li><span class="scalable" data-base="0.5">1/2</span> tbsp mustard seeds</li>
<li><span class="scalable" data-base="1.0">1</span> tsp fenugreek seeds</li>
<li><span class="scalable" data-base="12.0">12</span> curry leaves</li>
<li><span class="scalable" data-base="1.0">1</span> brown onion</li>
<li><span class="scalable" data-base="1.0">1</span> eggplant <span class="paren">(Indian, cut into thin wedges)</span></li>
<li><span class="scalable" data-base="6.0">6</span> okra <span class="paren">(ladies’ fingers)</span></li>
<li><span class="scalable" data-base="2.0">2</span> tomatoes <span class="paren">(cut into cubes or eighths)</span></li>
<li><span class="scalable" data-base="1.0">1</span> tbsp sugar <span class="paren">(ideally palm sugar, gula melaka)</span></li>
<li><span class="scalable" data-base="1.0">1</span> tbsp salt</li>
<li><span class="scalable" data-base="0.5">1/2</span> cup coconut milk <span class="paren">(optional)</span></li>
</ul>
<h3>Curry paste <span class="paren">(rempah)</span></h3>
<ul>
<li><span class="scalable" data-base="8.0">8</span> garlic cloves</li>
<li><span class="scalable" data-base="3.0">3</span> shallots</li>
<li><span class="scalable" data-base="10.0">10</span> chilli peppers <span class="paren">(dried or fresh)</span></li>
<li><span class="scalable" data-base="50.0">50</span> g curry powder</li>
<li><span class="scalable" data-base="1.0">1</span> inch ginger</li>
<li><span class="scalable" data-base="1.0">1</span> inch galangal</li>
<li><span class="scalable" data-base="2.0">2</span> lemongrass stalks</li>
</ul>
<h3>Curry powder</h3>
<p>You can make it using the following spices, or source a good Malaysian fish curry powder such as
<a href="https://www.babas.com.my/index.php/business/product-masala-mix">Baba’s</a>. Note if using a packaged
fish curry powder, check if it already includes the toasted rice powder, and leave it out if so.</p>
<ul>
<li><span class="scalable" data-base="0.5">1/2</span> tsp or <span class="scalable" data-base="10.0">10</span> cloves</li>
<li><span class="scalable" data-base="0.5">1/2</span> tsp or <span class="scalable" data-base="20.0">20</span> black peppercorns</li>
<li><span class="scalable" data-base="4.0">4</span> whole cardamom pods</li>
<li><span class="scalable" data-base="1.0">1</span> cinnamon stick</li>
<li><span class="scalable" data-base="4.0">4</span> whole dried chilies or <span class="scalable" data-base="1.0">1</span> tsp chilli powder</li>
<li><span class="scalable" data-base="4.0">4</span> tbsp coriander seeds</li>
<li><span class="scalable" data-base="2.0">2</span> tbsp cumin seeds</li>
<li><span class="scalable" data-base="1.0">1</span> tsp fennel seeds</li>
</ul>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<ol>
<li>
<p>In advance make the curry powder by toasting the spices for 3-5 minutes, and then grinding them in a spice grinder or mortar and pestle. Repeat until it is sufficiently fine. Similarly, prepare the rice flour by toasting the rice in a dry frying pan over medium heat, and grinding it to a fine powder.</p>
</li>
<li>
<p>Add 1.5 teaspoons of tamarind paste into a bowl filled with 100 ml water. Mix well. Pour the tamarind solution onto the fish and let it rest for 10 minutes.</p>
</li>
<li>
<p>Blend garlic, shallot, ginger, galangal, lemongrass, curry powder, and either soaked and deseeded dried chillies or fresh chillies. Set aside.</p>
</li>
<li>
<p>Heat the oil at medium heat. Sautés sliced onion until fragrant before adding curry leaves. Add mustard seeds and fenugreek seeds. Continue sautéing until mustard seeds begin to pop. Add the blended ingredients and cook for several minutes until they darken.</p>
</li>
<li>
<p>Add the curry paste to the wok and fry. When oil begins to separate from the ingredients, add pounded toasted rice and 700ml water to the wok (can optionally remove some of the water and add coconut milk at this stage). Increase heat to the maximum.</p>
</li>
<li>
<p>Once curry boils vigorously, add fish, eggplant, ladies’ fingers and tomatoes. Reduce heat to the minimum and let it simmer until fish is cooked. It should take about 8 to 10 minutes if fish is around 1 kg.</p>
</li>
<li>
<p>Remove fish from curry once it is cooked. Leave aside. Add the remaining 1.5 tsp of the tamarind paste, 1 tbsp sugar, and 1 tbsp salt (or to taste). Continue simmering for the next 40 minutes with the lid on or until curry thickens.</p>
</li>
<li>
<p>Add fish head and the rest of the meat into curry. Increase the heat to allow it to boil. Once it boils, switch off the stove. Serve fish head curry with steamed white rice.</p>
</li>
</ol><script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        </section>
    </div>


    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/singaporean-chicken-curry/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/chicken-curry.jpg" alt="Chicken curry">
                    </div>

                    <div class="card-details">
                        <h3>Chicken curry</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/curry-leaf-mayonnaise/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/curry-leaves.jpg" alt="Curry leaf mayonnaise">
                    </div>

                    <div class="card-details">
                        <h3>Curry leaf mayonnaise</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/beef-rendang/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/rendang.jpg" alt="Beef rendang">
                    </div>

                    <div class="card-details">
                        <h3>Beef rendang</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>


<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>