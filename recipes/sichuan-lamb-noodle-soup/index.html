<!DOCTYPE html>
<html lang="en">

<head>

  <title>Sichuan lamb noodle soup recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="A deliciously rich, fatty, and numbing cumin lamb noodle soup from central China, adapted from Tim Chin from Serious Eats.
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Sichuan lamb noodle soup recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/sichuan-lamb-noodle-soup/ ">
  <meta property="og:description" content="A deliciously rich, fatty, and numbing cumin lamb noodle soup from central China, adapted from Tim Chin from Serious Eats.
">
  <meta property="og:image" content="/images/recipes/lamb-noodle-soup.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/sichuan-lamb-noodle-soup/ ">
  <meta name="twitter:title" content="Sichuan lamb noodle soup recipe | josh iza.ac">
  <meta name="twitter:description" content="A deliciously rich, fatty, and numbing cumin lamb noodle soup from central China, adapted from Tim Chin from Serious Eats.
">
  <meta name="twitter:image" content="/images/recipes/lamb-noodle-soup.jpg">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Sichuan lamb noodle soup",
          "image": [
            "../..//images/recipes/lamb-noodle-soup.jpg"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-28 00:00:00+08:00",
          "description": "A deliciously rich, fatty, and numbing cumin lamb noodle soup from central China, adapted from Tim Chin from Serious Eats.",

          "totalTime": "PT2.5H",

          "recipeYield": "6 servings servings",

          "recipeIngredient": [
            "1.5 to 1.8kg (approximately 4) lamb shanks or lamb neck slices",
            "2 tbsp (18g) kosher salt",
            "2 tbsp (30ml) vegetable oil (divided)",
            "2 tbsp (30ml) Shaoxing wine",
            "2L [[chicken stock]]",
            "500ml water",
            "2 spring onions (trimmed and halved)",
            "2 medium cloves garlic (smashed)",
            "2-inch cinnamon stick",
            "1-inch ginger (smashed)",
            "4 star anise",
            "3/4 cup (180ml) canola oil",
            "4 medium cloves garlic (finely minced)",
            "8-12 dried chilies (coarsely ground)",
            "2 tbsp cumin seeds (toasted and coarsely ground)",
            "1 tbsp Sichuan peppercorns (coarsely ground)",
            "1/4 tsp white pepper",
            "1/3 cup (80ml) dark soy sauce",
            "2 tsp (8g) sugar",
            "Hand-pulled noodles (lamian) or ramen noodles",
            "4 spring onions (sliced thinly)",
            "8 fresh coriander sprigs (cut into 1-inch pieces)"
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "Sprinkle lamb evenly on all sides with salt and place on wire rack set in rimmed baking sheet.
Let stand at room temperature for at least 30 minutes and up to 2 hours."
            },
            {
              "@type": "HowToStep",
              "text": "In a pressure cooker set to sauté mode, or a dutch oven over medium-high heat, heat 1 tablespoon
(15ml) oil until smoking. Working in batches, brown lamb on all sides, about 8 minutes; transfer to
a heatproof bowl. Pour off fat in pressure cooker into a heatproof bowl and reserve."
            },
            {
              "@type": "HowToStep",
              "text": "Return cooker to heat (or sauté mode), stir in the Shaoxing wine, and cook, scraping up any
browned bits with wooden spoon, until alcohol has cooked off, about 30 seconds. Stir in chicken
stock and water. Return lamb to pot along with any accumulated juices.


Pressure cook: Lock pressure-cooker lid in place and bring to high pressure over high heat.
Once cooker has reached high pressure, cook for 40 minutes. When done, depressurize the cooker, and
carefully remove the lid, allowing steam to escape away from you.


Slow cook: Bring the dutch oven to a boil, and then turn it down to a simmer. Put the lid
on (with a small gap for excess steam to escape), and cook for a minimum of 2-3 hours, until lamb
is fork tender, and broth is rich and fatty."
            },
            {
              "@type": "HowToStep",
              "text": "Pressure cook: Lock pressure-cooker lid in place and bring to high pressure over high heat.
Once cooker has reached high pressure, cook for 40 minutes. When done, depressurize the cooker, and
carefully remove the lid, allowing steam to escape away from you."
            },
            {
              "@type": "HowToStep",
              "text": "Slow cook: Bring the dutch oven to a boil, and then turn it down to a simmer. Put the lid
on (with a small gap for excess steam to escape), and cook for a minimum of 2-3 hours, until lamb
is fork tender, and broth is rich and fatty."
            },
            {
              "@type": "HowToStep",
              "text": "Strain broth through fine-mesh strainer into clean heatproof container, pressing on solids to
extract as much liquid as possible; transfer lamb to work surface. When lamb is cool enough to
handle, separate meat from bones, discarding bones."
            },
            {
              "@type": "HowToStep",
              "text": "Heat remaining 1 tablespoon (15ml) oil in now-empty pressure cooker/dutch oven over medium heat
(or using an electric cooker’s sauté mode) until shimmering. Add spring onions, garlic, ginger, and
star anise and cook until fragrant, about 1 minute. Stir in strained broth, bring to boil, and
simmer until fragrant, 10 to 15 minutes. Season with salt."
            },
            {
              "@type": "HowToStep",
              "text": "Meanwhile, add oil, reserved lamb fat, and minced garlic to medium saucepan set over medium-high
heat and cook until garlic is fragrant and just beginning to brown, 3 to 5 minutes."
            },
            {
              "@type": "HowToStep",
              "text": "Remove from heat and stir in chilies, cumin, Sichuan peppercorn, and white pepper. Let mixture
cool slightly, about 5 minutes. Whisk in dark soy sauce and sugar. Gently stir in reserved lamb
meat until lightly shredded and incorporated. Season with salt."
            },
            {
              "@type": "HowToStep",
              "text": "Using a slotted spoon, remove and discard spring onions, garlic, ginger, and star anise pods from broth."
            },
            {
              "@type": "HowToStep",
              "text": "Bring large pot of unsalted water to boil over high heat. If making your own hand-pulled noodles,
prepare them now; otherwise, proceed with cooking store-bought noodles. Place in pot of boiling
water, stirring gently with chopsticks or tongs to prevent sticking. Add about 360ml hot broth to serving bowls."
            },
            {
              "@type": "HowToStep",
              "text": "When noodles are cooked, drain thoroughly with fine-mesh strainer or noodle basket, shaking off
as much excess water as possible, then place noodles in each bowl of hot broth. Stir noodles with
chopsticks or tongs, then lift and fold noodles over. Spoon 1/2 cup shredded lamb mixture with some
of its sauce over noodles. Sprinkle with sliced spring onions and coriander. Serve immediately."
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">


<article class="recipe-container">

    <header class="recipe-header">

        <div class="hero-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/recipes/lamb-noodle-soup.jpg');">
            <h1 class="recipe-title hero-text">Sichuan lamb noodle soup</h1>
        </div>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>2.5 hours</span>
                <span>MAKES</span><span id="servings-badge" data-original="6 servings"><span class="scalable" data-base="6.0">6</span> servings</span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/lamb-noodle-soup.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>A deliciously rich, fatty, and numbing cumin lamb noodle soup from central China, adapted from
<a href="https://www.seriouseats.com/shredded-lamb-noodle-soup">Tim Chin from Serious Eats</a>.</p>

        </div>
    </header>


    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<h3>Broth</h3>
<ul>
<li><span class="scalable" data-base="1.5">1.5</span> to <span class="scalable" data-base="1.8">1.8</span>kg <span class="paren">(approximately <span class="scalable" data-base="4.0">4</span>)</span> lamb shanks or lamb neck slices</li>
<li><span class="scalable" data-base="2.0">2</span> tbsp <span class="paren">(<span class="scalable" data-base="18.0">18</span>g)</span> kosher salt</li>
<li><span class="scalable" data-base="2.0">2</span> tbsp <span class="paren">(<span class="scalable" data-base="30.0">30</span>ml)</span> vegetable oil <span class="paren">(divided)</span></li>
<li><span class="scalable" data-base="2.0">2</span> tbsp <span class="paren">(<span class="scalable" data-base="30.0">30</span>ml)</span> Shaoxing wine</li>
<li><span class="scalable" data-base="2.0">2</span>L <a href="/recipes/chicken-stock/" class="component-link">chicken stock</a></li>
<li><span class="scalable" data-base="500.0">500</span>ml water</li>
<li><span class="scalable" data-base="2.0">2</span> spring onions <span class="paren">(trimmed and halved)</span></li>
<li><span class="scalable" data-base="2.0">2</span> medium cloves garlic <span class="paren">(smashed)</span></li>
<li><span class="scalable" data-base="2.0">2</span>-inch cinnamon stick</li>
<li><span class="scalable" data-base="1.0">1</span>-inch ginger <span class="paren">(smashed)</span></li>
<li><span class="scalable" data-base="4.0">4</span> star anise</li>
</ul>
<h3>Lamb</h3>
<ul>
<li><span class="scalable" data-base="0.75">3/4</span> cup <span class="paren">(<span class="scalable" data-base="180.0">180</span>ml)</span> canola oil</li>
<li><span class="scalable" data-base="4.0">4</span> medium cloves garlic <span class="paren">(finely minced)</span></li>
<li><span class="scalable" data-base="8.0">8</span>-<span class="scalable" data-base="12.0">12</span> dried chilies <span class="paren">(coarsely ground)</span></li>
<li><span class="scalable" data-base="2.0">2</span> tbsp cumin seeds <span class="paren">(toasted and coarsely ground)</span></li>
<li><span class="scalable" data-base="1.0">1</span> tbsp Sichuan peppercorns <span class="paren">(coarsely ground)</span></li>
<li><span class="scalable" data-base="0.25">1/4</span> tsp white pepper</li>
<li><span class="scalable" data-base="0.3333333333333333">1/3</span> cup <span class="paren">(<span class="scalable" data-base="80.0">80</span>ml)</span> dark soy sauce</li>
<li><span class="scalable" data-base="2.0">2</span> tsp <span class="paren">(<span class="scalable" data-base="8.0">8</span>g)</span> sugar</li>
</ul>
<h3>To serve</h3>
<ul>
<li>Hand-pulled noodles <span class="paren">(lamian)</span> or ramen noodles</li>
<li><span class="scalable" data-base="4.0">4</span> spring onions <span class="paren">(sliced thinly)</span></li>
<li><span class="scalable" data-base="8.0">8</span> fresh coriander sprigs <span class="paren">(cut into <span class="scalable" data-base="1.0">1</span>-inch pieces)</span></li>
</ul>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<h3>Broth</h3>
<ol>
<li>
<p>Sprinkle lamb evenly on all sides with salt and place on wire rack set in rimmed baking sheet.
Let stand at room temperature for at least 30 minutes and up to 2 hours.</p>
</li>
<li>
<p>In a pressure cooker set to sauté mode, or a dutch oven over medium-high heat, heat 1 tablespoon
(15ml) oil until smoking. Working in batches, brown lamb on all sides, about 8 minutes; transfer to
a heatproof bowl. Pour off fat in pressure cooker into a heatproof bowl and reserve.</p>
</li>
<li>
<p>Return cooker to heat (or sauté mode), stir in the Shaoxing wine, and cook, scraping up any
browned bits with wooden spoon, until alcohol has cooked off, about 30 seconds. Stir in chicken
stock and water. Return lamb to pot along with any accumulated juices.</p>
<ul>
<li>
<p><strong>Pressure cook:</strong> Lock pressure-cooker lid in place and bring to high pressure over high heat.
Once cooker has reached high pressure, cook for 40 minutes. When done, depressurize the cooker, and
carefully remove the lid, allowing steam to escape away from you.</p>
</li>
<li>
<p><strong>Slow cook:</strong> Bring the dutch oven to a boil, and then turn it down to a simmer. Put the lid
on (with a small gap for excess steam to escape), and cook for a minimum of 2-3 hours, until lamb
is fork tender, and broth is rich and fatty.</p>
</li>
</ul>
</li>
<li>
<p>Strain broth through fine-mesh strainer into clean heatproof container, pressing on solids to
extract as much liquid as possible; transfer lamb to work surface. When lamb is cool enough to
handle, separate meat from bones, discarding bones.</p>
</li>
<li>
<p>Heat remaining 1 tablespoon (15ml) oil in now-empty pressure cooker/dutch oven over medium heat
(or using an electric cooker’s sauté mode) until shimmering. Add spring onions, garlic, ginger, and
star anise and cook until fragrant, about 1 minute. Stir in strained broth, bring to boil, and
simmer until fragrant, 10 to 15 minutes. Season with salt.</p>
</li>
</ol>
<h3>Lamb</h3>
<ol>
<li>
<p>Meanwhile, add oil, reserved lamb fat, and minced garlic to medium saucepan set over medium-high
heat and cook until garlic is fragrant and just beginning to brown, 3 to 5 minutes.</p>
</li>
<li>
<p>Remove from heat and stir in chilies, cumin, Sichuan peppercorn, and white pepper. Let mixture
cool slightly, about 5 minutes. Whisk in dark soy sauce and sugar. Gently stir in reserved lamb
meat until lightly shredded and incorporated. Season with salt.</p>
</li>
</ol>
<h3>To serve</h3>
<ol>
<li>
<p>Using a slotted spoon, remove and discard spring onions, garlic, ginger, and star anise pods from broth.</p>
</li>
<li>
<p>Bring large pot of unsalted water to boil over high heat. If making your own hand-pulled noodles,
prepare them now; otherwise, proceed with cooking store-bought noodles. Place in pot of boiling
water, stirring gently with chopsticks or tongs to prevent sticking. Add about 360ml hot broth to serving bowls.</p>
</li>
<li>
<p>When noodles are cooked, drain thoroughly with fine-mesh strainer or noodle basket, shaking off
as much excess water as possible, then place noodles in each bowl of hot broth. Stir noodles with
chopsticks or tongs, then lift and fold noodles over. Spoon 1/2 cup shredded lamb mixture with some
of its sauce over noodles. Sprinkle with sliced spring onions and coriander. Serve immediately.</p>
</li>
</ol><script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        </section>
    </div>


    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/kaketsuyu-hot-noodle-soup/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/niku-udon.jpg" alt="Kaketsuyu (hot noodle soup)">
                    </div>

                    <div class="card-details">
                        <h3>Kaketsuyu (hot noodle soup)</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/lamb-dumplings/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/lamb-dumplings2.jpg" alt="Lamb dumplings">
                    </div>

                    <div class="card-details">
                        <h3>Lamb dumplings</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>


<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>