<!DOCTYPE html>
<html lang="en">

<head>

  <title>Apple tarte tatin with crème diplomat recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="From 2017-2018, there was a great (although underappreciated) cooking reality show on SBS here in Australia called The Chef’s Line. Each week, 4 Australian home cooks would go up against the chef’s line of a restaurant, eliminating either a home cook or a chef (more often...
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Apple tarte tatin with crème diplomat recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/apple-tarte-tatin-with-creme-diplomat/ ">
  <meta property="og:description" content="From 2017-2018, there was a great (although underappreciated) cooking reality show on SBS here in Australia called The Chef’s Line. Each week, 4 Australian home cooks would go up against the chef’s line of a restaurant, eliminating either a home cook or a chef (more often...
">
  <meta property="og:image" content="https://iza.ac/images/header-small.png">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/apple-tarte-tatin-with-creme-diplomat/ ">
  <meta name="twitter:title" content="Apple tarte tatin with crème diplomat recipe | josh iza.ac">
  <meta name="twitter:description" content="From 2017-2018, there was a great (although underappreciated) cooking reality show on SBS here in Australia called The Chef’s Line. Each week, 4 Australian home cooks would go up against the chef’s line of a restaurant, eliminating either a home cook or a chef (more often...
">
  <meta name="twitter:image" content="https://iza.ac/images/header-small.png">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Apple tarte tatin with crème diplomat",
          "image": [
            "../../"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-29 00:00:00+08:00",
          "description": "From 2017-2018, there was a great (although underappreciated) cooking reality show on SBS here in Australia called The Chef’s Line. Each week, 4 Australian...",

          "totalTime": "PT3H",

          "recipeYield": "6 servings servings",

          "recipeIngredient": [
            "250ml milk",
            "1/2 vanilla bean",
            "1 whole egg",
            "55g caster sugar",
            "30g cornflour",
            "30g unsalted butter",
            "100ml pure cream",
            "240g plain flour",
            "20g caster sugar",
            "5g yeast",
            "5g salt",
            "165g unsalted butter (shaped into a 10 cm square, slightly softened)",
            "140g demerara sugar",
            "100g caster sugar",
            "25g unsalted butter",
            "3 medium granny smith apples (peeled and halved, core removed)",
            "Oven temperatures are for conventional; if using fan-forced (convection), reduce the temperature",
            "by 20˚C. We use Australian tablespoons and cups: 1 teaspoon equals 5 ml; 1 tablespoon equals 20",
            "ml; 1 cup equals 250 ml. All herbs are fresh (unless specified) and cups are lightly packed. All",
            "vegetables are medium size and peeled, unless specified. All eggs are 55-60 g, unless specified."
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "Place the milk and vanilla bean in a saucepan over low heat until hot but
not boiling. Whisk the egg, sugar and cornflour in a bowl until smooth. Whisking continuously,
gradually add the hot milk and whisk until well combined. Strain the milk through a fine strainer,
return to the pan and stir over low heat until the mixture is thick and smooth. Remove from the
heat and whisk in the butter. Pour the mixture into a tray, cover with plastic wrap to prevent a
skin from forming."
            },
            {
              "@type": "HowToStep",
              "text": "Combine the flour, sugar, yeast and salt in a large bowl. Add 145 ml water and combine until a
dough comes together. Shape into a rough square, wrap in plastic wrap and refrigerate while you
caramelise the apples."
            },
            {
              "@type": "HowToStep",
              "text": "Place the sugar and 185 ml water in a frying pan and cook over high
heat until it starts to caramelise. Add the butter and swirl to combine until the caramel is a
golden amber colour. Remove from the heat, add the apple halves and stir until evenly coated in caramel."
            },
            {
              "@type": "HowToStep",
              "text": "Spray 6 metal moulds (about 375 ml capacity) with oil. Divide most of the caramel between the
moulds, then place an apple half in each mould with the core facing upwards. Reserve the remaining
caramel for serving."
            },
            {
              "@type": "HowToStep",
              "text": "Preheat the oven to 200˚C."
            },
            {
              "@type": "HowToStep",
              "text": "Remove the pastry from the refrigerator and roll out on a lightly floured surface into a 15 cm
square. Place the square of butter in the centre of the dough and enclose the dough around the
butter. Roll out into a 10 cm x 20 cm rectangle and sprinkle evenly with one third of the demerara
sugar. Fold the outside edges into the centre, creating a letter fold and keeping the sugar in
the middle. Turn the pastry 90 degrees, then repeat the rolling and folding two more times using up
the demerara sugar. If the butter is getting too soft to work with, then refrigerate the pastry
until the butter is firm but not hard."
            },
            {
              "@type": "HowToStep",
              "text": "Once the rolling and folding process is complete, roll out the pastry on a lightly floured
surface until 1.5 cm-thick. Using a pastry cutter, stamp out six circles the same size as the
moulds. Place the pastry on top of the apples in each of the moulds, tucking the pastry gently in
around the edges like tucking in a blanket. Bake for 20 minutes or until the pastry is golden and crisp."
            },
            {
              "@type": "HowToStep",
              "text": "Just before serving, beat the cream until soft peaks form, then fold through the cold creme pâtissière."
            },
            {
              "@type": "HowToStep",
              "text": "To serve, invert the moulds onto serving plates. Drizzle the reserved caramel around the tarte
tatin and serve with a quenelle of diplomat crème."
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">


<article class="recipe-container">

    <header class="recipe-header">

        <h1 class="recipe-title">Apple tarte tatin with crème diplomat</h1>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>3 hours</span>
                <span>MAKES</span><span id="servings-badge" data-original="6 servings"><span class="scalable" data-base="6.0">6</span> servings</span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/apple-tarte-tatin-with-creme-diplomat.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>From 2017-2018, there was a great (although underappreciated) cooking reality show on <span class="caps">SBS</span> here in Australia called <a href="https://en.wikipedia.org/wiki/The_Chefs%27_Line">The Chef’s Line</a>. Each week, 4 Australian home cooks would go up against the chef’s line of a restaurant, eliminating either a home cook or a chef (more often than not the head chef would win, but there were some upsets!).</p>
<p>One week, the pastry chef at a restaurant cooked <a href="https://www.sbs.com.au/food/recipe/apple-tarte-tatin-with-creme-diplomat/oiqg53s6s">individual apple tarte tatin’s</a>, and the result looked so good I had to try it at home. It went remarkably well for such an involved recipe (and my first time making puff pastry from scratch), but I found that stainless steel moulds worked a lot better for cooking the apple and crisping the puff pastry.</p>

        </div>
    </header>


    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<h3>Crème diplomat</h3>
<ul>
<li><span class="scalable" data-base="250.0">250</span>ml milk</li>
<li><span class="scalable" data-base="0.5">1/2</span> vanilla bean</li>
<li><span class="scalable" data-base="1.0">1</span> whole egg</li>
<li><span class="scalable" data-base="55.0">55</span>g caster sugar</li>
<li><span class="scalable" data-base="30.0">30</span>g cornflour</li>
<li><span class="scalable" data-base="30.0">30</span>g unsalted butter</li>
<li><span class="scalable" data-base="100.0">100</span>ml pure cream</li>
</ul>
<h3>Puff pastry</h3>
<ul>
<li><span class="scalable" data-base="240.0">240</span>g plain flour</li>
<li><span class="scalable" data-base="20.0">20</span>g caster sugar</li>
<li><span class="scalable" data-base="5.0">5</span>g yeast</li>
<li><span class="scalable" data-base="5.0">5</span>g salt</li>
<li><span class="scalable" data-base="165.0">165</span>g unsalted butter <span class="paren">(shaped into a <span class="scalable" data-base="10.0">10</span> cm square, slightly softened)</span></li>
<li><span class="scalable" data-base="140.0">140</span>g demerara sugar</li>
</ul>
<h3>Caramelised apples</h3>
<ul>
<li><span class="scalable" data-base="100.0">100</span>g caster sugar</li>
<li><span class="scalable" data-base="25.0">25</span>g unsalted butter</li>
<li>
<p><span class="scalable" data-base="3.0">3</span> medium granny smith apples <span class="paren">(peeled and halved, core removed)</span></p>
</li>
<li>
<p>Oven temperatures are for conventional; if using fan-forced <span class="paren">(convection)</span>, reduce the temperature</p>
</li>
<li>by <span class="scalable" data-base="20.0">20</span>˚C. We use Australian tablespoons and cups: <span class="scalable" data-base="1.0">1</span> teaspoon equals <span class="scalable" data-base="5.0">5</span> ml; <span class="scalable" data-base="1.0">1</span> tablespoon equals <span class="scalable" data-base="20.0">20</span></li>
<li>ml; <span class="scalable" data-base="1.0">1</span> cup equals <span class="scalable" data-base="250.0">250</span> ml. All herbs are fresh <span class="paren">(unless specified)</span> and cups are lightly packed. All</li>
<li>vegetables are medium size and peeled, unless specified. All eggs are <span class="scalable" data-base="55.0">55</span>-<span class="scalable" data-base="60.0">60</span> g, unless specified.</li>
</ul>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<h3>Crème pâtissière</h3>
<ol>
<li>Place the milk and vanilla bean in a saucepan over low heat until hot but
not boiling. Whisk the egg, sugar and cornflour in a bowl until smooth. Whisking continuously,
gradually add the hot milk and whisk until well combined. Strain the milk through a fine strainer,
return to the pan and stir over low heat until the mixture is thick and smooth. Remove from the
heat and whisk in the butter. Pour the mixture into a tray, cover with plastic wrap to prevent a
skin from forming.</li>
</ol>
<h3>Mix the puff pastry</h3>
<ol>
<li>Combine the flour, sugar, yeast and salt in a large bowl. Add 145 ml water and combine until a
dough comes together. Shape into a rough square, wrap in plastic wrap and refrigerate while you
caramelise the apples.</li>
</ol>
<h3>Caramelised apples</h3>
<ol>
<li>
<p>Place the sugar and 185 ml water in a frying pan and cook over high
heat until it starts to caramelise. Add the butter and swirl to combine until the caramel is a
golden amber colour. Remove from the heat, add the apple halves and stir until evenly coated in caramel.</p>
</li>
<li>
<p>Spray 6 metal moulds (about 375 ml capacity) with oil. Divide most of the caramel between the
moulds, then place an apple half in each mould with the core facing upwards. Reserve the remaining
caramel for serving.</p>
</li>
</ol>
<h3>Fold the pastry and bake</h3>
<ol>
<li>
<p>Preheat the oven to 200˚C.</p>
</li>
<li>
<p>Remove the pastry from the refrigerator and roll out on a lightly floured surface into a 15 cm
square. Place the square of butter in the centre of the dough and enclose the dough around the
butter. Roll out into a 10 cm x 20 cm rectangle and sprinkle evenly with one third of the demerara
sugar. Fold the outside edges into the centre, creating a letter fold and keeping the sugar in
the middle. Turn the pastry 90 degrees, then repeat the rolling and folding two more times using up
the demerara sugar. If the butter is getting too soft to work with, then refrigerate the pastry
until the butter is firm but not hard.</p>
</li>
<li>
<p>Once the rolling and folding process is complete, roll out the pastry on a lightly floured
surface until 1.5 cm-thick. Using a pastry cutter, stamp out six circles the same size as the
moulds. Place the pastry on top of the apples in each of the moulds, tucking the pastry gently in
around the edges like tucking in a blanket. Bake for 20 minutes or until the pastry is golden and crisp.</p>
</li>
</ol>
<h3>Crème diplomat</h3>
<ol>
<li>
<p>Just before serving, beat the cream until soft peaks form, then fold through the cold creme pâtissière.</p>
</li>
<li>
<p>To serve, invert the moulds onto serving plates. Drizzle the reserved caramel around the tarte
tatin and serve with a quenelle of diplomat crème.</p>
</li>
</ol><script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        </section>
    </div>


    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/tarte-normande-apple-tart/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/apple-tart.jpg" alt="Tarte aux pommes normande (apple tart)">
                    </div>

                    <div class="card-details">
                        <h3>Tarte aux pommes normande (apple tart)</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/apple-streusel-cake/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/apple-streusel-cake.jpg" alt="Apple streusel cake">
                    </div>

                    <div class="card-details">
                        <h3>Apple streusel cake</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/blueberry-pie/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/blueberry-pie-baked.jpg" alt="Blueberry pie">
                    </div>

                    <div class="card-details">
                        <h3>Blueberry pie</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>


<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>