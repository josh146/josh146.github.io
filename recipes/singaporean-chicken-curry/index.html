<!DOCTYPE html>
<html lang="en">

<head>

  <title>Chicken curry recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="A comfort food, this Singaporean chicken curry is uniquely different to standard Indian curries – spicer and soupier, with use of aromatics like lemongrass and galangal. Usually eaten with white jasmine rice, but can also be eaten with roti prata.
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Chicken curry recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/singaporean-chicken-curry/ ">
  <meta property="og:description" content="A comfort food, this Singaporean chicken curry is uniquely different to standard Indian curries – spicer and soupier, with use of aromatics like lemongrass and galangal. Usually eaten with white jasmine rice, but can also be eaten with roti prata.
">
  <meta property="og:image" content="/images/recipes/chicken-curry.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/singaporean-chicken-curry/ ">
  <meta name="twitter:title" content="Chicken curry recipe | josh iza.ac">
  <meta name="twitter:description" content="A comfort food, this Singaporean chicken curry is uniquely different to standard Indian curries – spicer and soupier, with use of aromatics like lemongrass and galangal. Usually eaten with white jasmine rice, but can also be eaten with roti prata.
">
  <meta name="twitter:image" content="/images/recipes/chicken-curry.jpg">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Chicken curry",
          "image": [
            "../..//images/recipes/chicken-curry.jpg"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-18 00:00:00+08:00",
          "description": "A comfort food, this Singaporean chicken curry is uniquely different to standard Indian curries – spicer and soupier, with use of aromatics like lemongrass...",

          "totalTime": "PT2H",

          "recipeYield": "4-5 servings servings",

          "recipeIngredient": [
            "1/2 cup vegetable oil",
            "1 cinnamon stick",
            "3 cloves",
            "2 star anise",
            "6 chicken thighs (~1kg)",
            "6 stalks curry leaves",
            "1 kg potatoes (peeled and cut into 8ths) .",
            "3/4 cup or 200 ml coconut milk",
            "500 ml water",
            "4-6 medium/large shallots",
            "4 large garlic cloves",
            "1 lemongrass stalk",
            "1 inch ginger",
            "1 inch galangal",
            "12-20 dried red chillies",
            "2 fresh chillies (birds eye preferable)",
            "4 candle nuts (roughly chopped)1",
            "20g or 1 tbsp belacan",
            "3 tbsp toasted ground coriander2",
            "1 tbsp toasted ground cumin",
            "1 tbsp toasted ground turmeric",
            "1 tsp toasted ground fennel seeds"
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "De-seed the dried chillies, and soak in fresh boiled water for approximately 20 minutes, until re-hydrated."
            },
            {
              "@type": "HowToStep",
              "text": "Wrap the belacan in foil, and toast it on both sides in a frying pan or in an toaster oven, until fragrant (about 4-5 minutes)"
            },
            {
              "@type": "HowToStep",
              "text": "Combine the ingredients for the rempah in a food processor and blitz to form a fine paste. Add the water from the dried chillies or vegetable oil to help the paste come together."
            },
            {
              "@type": "HowToStep",
              "text": "Heat a heavy bottomed saucepan, dutch oven, or wok over medium high heat. Add the 1/2 cup of vegetable oil, and when hot, sauté the cinnamon stick, cloves, star anise, and curry leaves until fragrant (approximately 30 seconds)."
            },
            {
              "@type": "HowToStep",
              "text": "Add the rempah and cook until the paste is pulpy and dark and the oil has split from the paste, approximately 10 minutes."
            },
            {
              "@type": "HowToStep",
              "text": "Add the chicken thighs and potatoes, and stir to coat for 30s to 1 minute."
            },
            {
              "@type": "HowToStep",
              "text": "Add the water, making sure the chicken is covered. Bring to the boil, and immediately reduce to a simmer and add the lid. Leave to simmer until the chicken and potatoes are cooked, approximately 40 minutes – 1 hour."
            },
            {
              "@type": "HowToStep",
              "text": "Stir through the coconut milk, and season with salt, sugar, and tamarind puree to taste (generally, ~1 tbsp of salt, 2 tsp of sugar, and 2 tsp of tamarind pulp)."
            },
            {
              "@type": "HowToStep",
              "text": "Serve hot with rice, and garnished with coriander leaves and chopped fresh red chilli."
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">


<article class="recipe-container">

    <header class="recipe-header">

        <div class="hero-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/recipes/chicken-curry.jpg');">
            <h1 class="recipe-title hero-text">Chicken curry</h1>
        </div>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>2 hours</span>
                <span>MAKES</span><span id="servings-badge" data-original="4-5 servings"><span class="scalable" data-base="4.0">4</span>-<span class="scalable" data-base="5.0">5</span> servings</span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/singaporean-chicken-curry.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>A comfort food, this Singaporean chicken curry is uniquely different to standard Indian curries – spicer and soupier, with use of aromatics like lemongrass and galangal. Usually eaten with white jasmine rice, but can also be eaten with <a href="/recipes/roti-prata/" class="component-link">roti prata</a>.</p>

        </div>
    </header>


    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<ul>
<li><span class="scalable" data-base="0.5">1/2</span> cup vegetable oil</li>
<li><span class="scalable" data-base="1.0">1</span> cinnamon stick</li>
<li><span class="scalable" data-base="3.0">3</span> cloves</li>
<li><span class="scalable" data-base="2.0">2</span> star anise</li>
<li><span class="scalable" data-base="6.0">6</span> chicken thighs <span class="paren">(~<span class="scalable" data-base="1.0">1</span>kg)</span></li>
<li><span class="scalable" data-base="6.0">6</span> stalks curry leaves</li>
<li><span class="scalable" data-base="1.0">1</span> kg potatoes <span class="paren">(peeled and cut into <span class="scalable" data-base="8.0">8</span>ths)</span> .</li>
<li><span class="scalable" data-base="0.75">3/4</span> cup or <span class="scalable" data-base="200.0">200</span> ml coconut milk</li>
<li><span class="scalable" data-base="500.0">500</span> ml water</li>
</ul>
<h3>Rempah <span class="paren">(spice paste)</span></h3>
<ul>
<li><span class="scalable" data-base="4.0">4</span>-<span class="scalable" data-base="6.0">6</span> medium/large shallots</li>
<li><span class="scalable" data-base="4.0">4</span> large garlic cloves</li>
<li><span class="scalable" data-base="1.0">1</span> lemongrass stalk</li>
<li><span class="scalable" data-base="1.0">1</span> inch ginger</li>
<li><span class="scalable" data-base="1.0">1</span> inch galangal</li>
<li><span class="scalable" data-base="12.0">12</span>-<span class="scalable" data-base="20.0">20</span> dried red chillies</li>
<li><span class="scalable" data-base="2.0">2</span> fresh chillies <span class="paren">(birds eye preferable)</span></li>
<li><span class="scalable" data-base="4.0">4</span> candle nuts <span class="paren">(roughly chopped)</span><sup id="sf-singaporean-chicken-curry-1-back"><a class="simple-footnote" href="#sf-singaporean-chicken-curry-1" title="Candlenuts are traditionally used to thicken chicken curry, but this can be substituted for macadamia nuts if hard to find.">1</a></sup></li>
<li><span class="scalable" data-base="20.0">20</span>g or <span class="scalable" data-base="1.0">1</span> tbsp belacan</li>
<li><span class="scalable" data-base="3.0">3</span> tbsp toasted ground coriander<sup id="sf-singaporean-chicken-curry-2-back"><a class="simple-footnote" href="#sf-singaporean-chicken-curry-2" title="If you are able to source a good Singaporean or Malaysian chicken curry powder likeBaba’s, feel free to use that and leave out the ground spices in the rempah.">2</a></sup></li>
<li><span class="scalable" data-base="1.0">1</span> tbsp toasted ground cumin</li>
<li><span class="scalable" data-base="1.0">1</span> tbsp toasted ground turmeric</li>
<li><span class="scalable" data-base="1.0">1</span> tsp toasted ground fennel seeds</li>
</ul>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<ol>
<li>
<p>De-seed the dried chillies, and soak in fresh boiled water for approximately 20 minutes, until re-hydrated.</p>
</li>
<li>
<p>Wrap the belacan in foil, and toast it on both sides in a frying pan or in an toaster oven, until fragrant (about 4-5 minutes)</p>
</li>
<li>
<p>Combine the ingredients for the rempah in a food processor and blitz to form a fine paste. Add the water from the dried chillies or vegetable oil to help the paste come together.</p>
</li>
<li>
<p>Heat a heavy bottomed saucepan, dutch oven, or wok over medium high heat. Add the 1/2 cup of vegetable oil, and when hot, sauté the cinnamon stick, cloves, star anise, and curry leaves until fragrant (approximately 30 seconds).</p>
</li>
<li>
<p>Add the rempah and cook until the paste is pulpy and dark and the oil has split from the paste, approximately 10 minutes.</p>
</li>
<li>
<p>Add the chicken thighs and potatoes, and stir to coat for 30s to 1 minute.</p>
</li>
<li>
<p>Add the water, making sure the chicken is covered. Bring to the boil, and immediately reduce to a simmer and add the lid. Leave to simmer until the chicken and potatoes are cooked, approximately 40 minutes – 1 hour.</p>
</li>
<li>
<p>Stir through the coconut milk, and season with salt, sugar, and tamarind puree to taste (generally, ~1 tbsp of salt, 2 tsp of sugar, and 2 tsp of tamarind pulp).</p>
</li>
<li>
<p>Serve hot with rice, and garnished with coriander leaves and chopped fresh red chilli.</p>
</li>
</ol>

        </section>
    </div>

    <div class="recipe-notes">
        <h2>NOTES</h2>
        <script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        <ol class="simple-footnotes"><li id="sf-singaporean-chicken-curry-1"><footnote>Candlenuts are traditionally used to thicken chicken curry, but this can be substituted for macadamia nuts if hard to find.</footnote> <a class="simple-footnote-back" href="#sf-singaporean-chicken-curry-1-back">↩︎</a></li><li id="sf-singaporean-chicken-curry-2"><footnote>
If you are able to source a good Singaporean or Malaysian chicken curry powder like <a href="https://www.babas.com.my/index.php/business/product-masala-mix">Baba’s</a>, feel free to use that and leave out the ground spices in the rempah.</footnote> <a class="simple-footnote-back" href="#sf-singaporean-chicken-curry-2-back">↩︎</a></li></ol>

    </div>

    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/singaporean-fish-curry/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/fish-curry.jpg" alt="Fish head curry">
                    </div>

                    <div class="card-details">
                        <h3>Fish head curry</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/hainanese-chicken-rice/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/chicken_rice.jpg" alt="Hainanese chicken rice">
                    </div>

                    <div class="card-details">
                        <h3>Hainanese chicken rice</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/chicken-xiao-long-bao/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/xiao-long-bao.jpg" alt="Chicken xiao long bao">
                    </div>

                    <div class="card-details">
                        <h3>Chicken xiao long bao</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>


<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>