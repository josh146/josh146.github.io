<!DOCTYPE html>
<html lang="en">

<head>

  <title>Roti prata recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="Roti prata is a delicious flaky flatbread of south Indian origin found in Singapore and Malaysia (where it is called roti canai), often served alongside chicken or fish curry sauce. Growing we would often head out to a 24 hour mamak stall (such as Al-Ameen on Bukit Timah) to...
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Roti prata recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/roti-prata/ ">
  <meta property="og:description" content="Roti prata is a delicious flaky flatbread of south Indian origin found in Singapore and Malaysia (where it is called roti canai), often served alongside chicken or fish curry sauce. Growing we would often head out to a 24 hour mamak stall (such as Al-Ameen on Bukit Timah) to...
">
  <meta property="og:image" content="/images/recipes/roti-prata.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/roti-prata/ ">
  <meta name="twitter:title" content="Roti prata recipe | josh iza.ac">
  <meta name="twitter:description" content="Roti prata is a delicious flaky flatbread of south Indian origin found in Singapore and Malaysia (where it is called roti canai), often served alongside chicken or fish curry sauce. Growing we would often head out to a 24 hour mamak stall (such as Al-Ameen on Bukit Timah) to...
">
  <meta name="twitter:image" content="/images/recipes/roti-prata.jpg">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Roti prata",
          "image": [
            "../..//images/recipes/roti-prata.jpg"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-22 00:00:00+08:00",
          "description": "Roti prata is a delicious flaky flatbread of south Indian origin found in Singapore and Malaysia (where it is called roti canai), often served alongside...",

          "totalTime": "PT3H",

          "recipeYield": "12 roti prata servings",

          "recipeIngredient": [
            "250ml vegetable oil (1 cup)",
            "125g ghee or clarified butter, melted",
            "500g bread flour (aim for flour with 11% protein)",
            "60ml milk, plus extra if necessary (1/4 cup)",
            "1 egg, lightly beaten",
            "1 tbsp caster sugar, or to taste",
            "1 tbsp vegetable oil"
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "For dough, combine ingredients and 180ml water in a mix until a soft, sticky dough forms. Add a
little more milk (10ml) if needed. Turn dough out onto a lightly floured work surface and knead
until smooth, elastic and shiny (8-10 minutes). Place dough in a lightly oiled bowl, cover with a
damp tea towel and set aside to rest for 20 minutes."
            },
            {
              "@type": "HowToStep",
              "text": "Roll dough into a 6 cm-diameter cylinder, then cut into 12 even pieces and roll into balls."
            },
            {
              "@type": "HowToStep",
              "text": "Pour oil into a bowl and add the balls of dough, turning each to coat well, then cover bowl with
plastic wrap and set aside at room temperature to rest (at least 1 hour or overnight)."
            },
            {
              "@type": "HowToStep",
              "text": "Melt the ghee and have it available in a small bowl. Press down each ball to a 20cm round on a
lightly oiled work surface. Carefully stretch dough in a circular motion with lightly greased hands
until very thin, pulling gently from underneath as you go."
            },
            {
              "@type": "HowToStep",
              "text": "When the dough is wafer-thin, dab lightly all over with melted ghee. Fold the left edge over two
thirds of the way, and then fold over the right edge in a letter fold. Make sure to trap air under
the folds. From here, you have two options1:"
            },
            {
              "@type": "HowToStep",
              "text": "Spiral: Carefully scrunch up the long edges to meet in the center – you should have a long ‘rope’
of dough. Finally, twist the dough in a spiral, tucking the end of the dough underneath. Leave the
spirals to rest for 30 minutes."
            },
            {
              "@type": "HowToStep",
              "text": "Square: Fold down the top edges until you have a flat square. With the square shape, the dough is
fried as-is and there is no need to rest it."
            },
            {
              "@type": "HowToStep",
              "text": "Heat a little ghee on a flat grill or frying pan over medium-high heat. If the prata are in spirals,
make sure to flatten them out with your palm. Add prata and cook until golden and crisp (1-2 minutes
each side). Repeat with remaining prata and ghee."
            },
            {
              "@type": "HowToStep",
              "text": "Before serving, make sure to quickly ‘clap’ each prata: with the prata flat on a plate or on the
table, place your hands against two opposite edges and bring them together quickly. Rotate the
prata 90 degrees and repeat.2"
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">

<style>
@media (min-width: 768px) {
    .recipe-ingredients {
        position: -webkit-sticky;
        position: sticky;
        top: 20px;
        z-index: 10;
        max-height: calc(100vh - 40px);
        overflow-y: auto;
    }
    .article-container {
        overflow: unset;
    }
}
</style>

<article class="recipe-container">

    <header class="recipe-header">

        <div class="hero-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/recipes/roti-prata.jpg');">
            <h1 class="recipe-title hero-text">Roti prata</h1>
        </div>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>3 hours</span>
                <span>MAKES</span><span id="servings-badge" data-original="12 roti prata"><span class="scalable" data-base="12.0">12</span> roti prata</span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/roti-prata.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>Roti prata is a delicious flaky flatbread of south Indian origin found in Singapore and Malaysia
(where it is called roti canai), often served alongside <a href="/recipes/singaporean-chicken-curry/" class="component-link">chicken</a> or <a href="/recipes/singaporean-fish-curry/" class="component-link">fish curry</a> sauce.</p>
<p>Growing we would often head out to a 24 hour mamak stall (such as <a href="https://www.ameenmakanhouse.com/">Al-Ameen</a> on Bukit Timah) to have roti prata (served with sugar and curry)
for breakfast (where my dad would always make sure to ask for the prata to be ‘goreng goreng’).</p>

        </div>
    </header>


    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<ul>
<li><span class="scalable" data-base="250.0">250</span>ml vegetable oil <span class="paren">(<span class="scalable" data-base="1.0">1</span> cup)</span></li>
<li><span class="scalable" data-base="125.0">125</span>g ghee or clarified butter, melted</li>
<li><span class="scalable" data-base="500.0">500</span>g bread flour <span class="paren">(aim for flour with <span class="scalable" data-base="11.0">11</span>% protein)</span></li>
<li><span class="scalable" data-base="60.0">60</span>ml milk, plus extra if necessary <span class="paren">(<span class="scalable" data-base="0.25">1/4</span> cup)</span></li>
<li><span class="scalable" data-base="1.0">1</span> egg, lightly beaten</li>
<li><span class="scalable" data-base="1.0">1</span> tbsp caster sugar, or to taste</li>
<li><span class="scalable" data-base="1.0">1</span> tbsp vegetable oil</li>
</ul>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<ol>
<li>
<p>For dough, combine ingredients and 180ml water in a mix until a soft, sticky dough forms. Add a
little more milk (10ml) if needed. Turn dough out onto a lightly floured work surface and knead
until smooth, elastic and shiny (8-10 minutes). Place dough in a lightly oiled bowl, cover with a
damp tea towel and set aside to rest for 20 minutes.</p>
</li>
<li>
<p>Roll dough into a 6 cm-diameter cylinder, then cut into 12 even pieces and roll into balls.</p>
</li>
<li>
<p>Pour oil into a bowl and add the balls of dough, turning each to coat well, then cover bowl with
plastic wrap and set aside at room temperature to rest (at least 1 hour or overnight).</p>
</li>
<li>
<p>Melt the ghee and have it available in a small bowl. Press down each ball to a 20cm round on a
lightly oiled work surface. Carefully stretch dough in a circular motion with lightly greased hands
until very thin, pulling gently from underneath as you go.</p>
</li>
<li>
<p>When the dough is wafer-thin, dab lightly all over with melted ghee. Fold the left edge over two
thirds of the way, and then fold over the right edge in a letter fold. Make sure to trap air under
the folds. From here, you have two options<sup id="sf-roti-prata-1-back"><a class="simple-footnote" href="#sf-roti-prata-1" title="From what I remember, square seems more common in Malaysia, whereas spiral seems more common in Singapore.">1</a></sup>:</p>
</li>
<li>
<p>Spiral: Carefully scrunch up the long edges to meet in the center – you should have a long ‘rope’
of dough. Finally, twist the dough in a spiral, tucking the end of the dough underneath. Leave the
spirals to rest for 30 minutes.</p>
</li>
<li>
<p>Square: Fold down the top edges until you have a flat square. With the square shape, the dough is
fried as-is and there is no need to rest it. </p>
</li>
<li>
<p>Heat a little ghee on a flat grill or frying pan over medium-high heat. If the prata are in spirals,
make sure to flatten them out with your palm. Add prata and cook until golden and crisp (1-2 minutes
each side). Repeat with remaining prata and ghee. </p>
</li>
<li>
<p>Before serving, make sure to quickly ‘clap’ each prata: with the prata flat on a plate or on the
table, place your hands against two opposite edges and bring them together quickly. Rotate the
prata 90 degrees and repeat.<sup id="sf-roti-prata-2-back"><a class="simple-footnote" href="#sf-roti-prata-2" title="Clapping the prata helps separate and break the flaky layers, releasing trapped steam and ensuring the prata stays crispy for longer.">2</a></sup></p>
</li>
</ol>

        </section>
    </div>

    <div class="recipe-notes">
        <h2>NOTES</h2>
        <script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        <ol class="simple-footnotes"><li id="sf-roti-prata-1"><footnote>From what I remember, square seems more common in Malaysia, whereas spiral seems more common in Singapore.</footnote> <a class="simple-footnote-back" href="#sf-roti-prata-1-back">↩︎</a></li><li id="sf-roti-prata-2"><footnote>Clapping the prata helps separate and break the flaky layers, releasing trapped steam and ensuring the prata stays crispy for longer.</footnote> <a class="simple-footnote-back" href="#sf-roti-prata-2-back">↩︎</a></li></ol>

    </div>

    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/beef-rendang/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/rendang.jpg" alt="Beef rendang">
                    </div>

                    <div class="card-details">
                        <h3>Beef rendang</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/singaporean-chicken-curry/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/chicken-curry.jpg" alt="Chicken curry">
                    </div>

                    <div class="card-details">
                        <h3>Chicken curry</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/crispy-fried-shallots/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/crispy-fried-shallots.jpg" alt="Crispy fried shallots">
                    </div>

                    <div class="card-details">
                        <h3>Crispy fried shallots</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>


<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>