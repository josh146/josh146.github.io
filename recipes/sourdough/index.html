<!DOCTYPE html>
<html lang="en">

<head>

  <title>Sourdough recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="My go-to sourdough recipe, it is flexible enough to make a loaf of bread on the weekend, or even midweek. Adapted originally from The Perfect Loaf.
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Sourdough recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/sourdough/ ">
  <meta property="og:description" content="My go-to sourdough recipe, it is flexible enough to make a loaf of bread on the weekend, or even midweek. Adapted originally from The Perfect Loaf.
">
  <meta property="og:image" content="/images/recipes/sourdough2.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/sourdough/ ">
  <meta name="twitter:title" content="Sourdough recipe | josh iza.ac">
  <meta name="twitter:description" content="My go-to sourdough recipe, it is flexible enough to make a loaf of bread on the weekend, or even midweek. Adapted originally from The Perfect Loaf.
">
  <meta name="twitter:image" content="/images/recipes/sourdough2.jpg">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Sourdough",
          "image": [
            "../..//images/recipes/sourdough2.jpg"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-25 00:00:00+08:00",
          "description": "My go-to sourdough recipe, it is flexible enough to make a loaf of bread on the weekend, or even midweek. Adapted originally from The Perfect Loaf.",

          "totalTime": "PT12H",

          "recipeYield": "2 loaves servings",

          "recipeIngredient": [
            "600g high-protein bread flour",
            "166g hard red wheat flour (optional, use 766g bread flour otherwise)",
            "161g whole wheat flour",
            "685g water",
            "20g salt",
            "180g mature levain",
            "40g mature starter",
            "40g bread flour",
            "40g whole wheat flour",
            "80g water",
            "8g mature starter",
            "40g bread flour",
            "40g whole wheat flour",
            "80g water"
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "Make the levain; you can either make this the night before or the day-of, adjust the amount of
sourdough starter and the ambient temperature of the levain as needed."
            },
            {
              "@type": "HowToStep",
              "text": "About 1-2 hours before the levain will be ready, prepare your autolyse1. Mix the flour and all but 50g of the water until fully hydrated, and leave in a warm area."
            },
            {
              "@type": "HowToStep",
              "text": "Add the mature levain to the autolysed dough, and mix until incorporated. Then, add the salt and
the reserved 50g of water, and mix until the water has absorbed. Place the dough on the counter and
do slap and folds until the dough strengthens and very nearly passes the window pane test. Move
dough back to the bulk fermentation bowl, perform some stretch and folds, and cover."
            },
            {
              "@type": "HowToStep",
              "text": "Leave the dough in a warm spot to bulk ferment for 3 hours and 30 minutes. Perform 2 sets of
stretch and folds at the beginning, 30 minutes apart."
            },
            {
              "@type": "HowToStep",
              "text": "Scrape the dough onto your counter. Divide the dough into two, and using a bench scraper preshape
each piece of dough into two rounds. Leave for 15-20 minutes for the gluten to relax."
            },
            {
              "@type": "HowToStep",
              "text": "Flip the dough over, and shape it into a batard. Pull the corners into a square, and fold the top
down half way. Fold the left and right side into the middle, and the start rolling tightly from the
bottom, sealing tightly with your little fingers, until you have a cylinder. Pinch the ends closed,
and then flip over into the bannetons, seam side up."
            },
            {
              "@type": "HowToStep",
              "text": "Dust with rice flour, and place in a sealed plastic bag in the fridge overnight."
            },
            {
              "@type": "HowToStep",
              "text": "Preheat the oven with your dutch oven on a rack on the bottom third to 230ºC."
            },
            {
              "@type": "HowToStep",
              "text": "Flip your dough out of the banneton onto two sheets of baking paper or a silicon mat. Brush the
top and score. Take your dutch oven out of the oven, and place the dough inside. Spray with some
water, put on the lid, and bake for 20 minutes covered."
            },
            {
              "@type": "HowToStep",
              "text": "Remove the lid, and bake for another 30-35 minutes uncovered. The internal temperature of the
loaf should be 96-99ºC."
            },
            {
              "@type": "HowToStep",
              "text": "Leave to rest on a wire rack for at least 2 hours before slicing."
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">

<style>
@media (min-width: 768px) {
    .recipe-ingredients {
        position: -webkit-sticky;
        position: sticky;
        top: 20px;
        z-index: 10;
        max-height: calc(100vh - 40px);
        overflow-y: auto;
    }
    .article-container {
        overflow: unset;
    }
}
</style>

<article class="recipe-container">

    <header class="recipe-header">

        <div class="hero-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/recipes/sourdough2.jpg');">
            <h1 class="recipe-title hero-text">Sourdough</h1>
        </div>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>12 hours</span>
                <span>MAKES</span><span id="servings-badge" data-original="2 loaves"><span class="scalable" data-base="2.0">2</span> loaves</span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/sourdough.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>My go-to sourdough recipe, it is flexible enough to make a loaf of bread on the weekend, or even midweek. Adapted originally from <a href="https://www.theperfectloaf.com/simple-weekday-sourdough-bread/">The Perfect Loaf</a>.</p>

        </div>
    </header>

    <div class="timeline-container collapsed" id="timeline-container">
        <h2 onclick="toggleTimeline()" class="timeline-header">Cooking Schedule<i class="timeline-arrow fas fa-angle-down"></i></h2>

        <div id="timeline-content">

            <div class="timeline-visual">
                <div class="timeline-step step-active"
                     data-offset="0"
                     data-duration="10">

                    <input type="time" id="start-time-input" value="09:00" oninput="updateTimeline()">
                    <div class="step-time" style="display: none;">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Mix levain and autolyse</span>
                        <span class="step-duration">
                            (10 min)
                            <!--  -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="10"
                     data-duration="300">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Autolyse</span>
                        <span class="step-duration">
                            (5 hours )
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-active"
                     data-offset="310"
                     data-duration="20">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Mix</span>
                        <span class="step-duration">
                            (20 min)
                            <!--  -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="330"
                     data-duration="210">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Bulk fermentation</span>
                        <span class="step-duration">
                            (3 hours 30 min)
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-active"
                     data-offset="540"
                     data-duration="5">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Preshape</span>
                        <span class="step-duration">
                            (5 min)
                            <!--  -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="545"
                     data-duration="20">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Rest</span>
                        <span class="step-duration">
                            (20 min)
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-active"
                     data-offset="565"
                     data-duration="5">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Shape</span>
                        <span class="step-duration">
                            (5 min)
                            <!--  -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="570"
                     data-duration="720">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Proof</span>
                        <span class="step-duration">
                            (12 hours )
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-active"
                     data-offset="1290"
                     data-duration="120">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Bake</span>
                        <span class="step-duration">
                            (2 hours )
                            <!--  -->
                        </span>
                    </div>
                </div>

                <div class="timeline-step step-finish">
                    <div class="step-time" id="visual-finish-time">--:--</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        </div>

                    <div class="step-content">
                        <span class="step-name">Finished!   </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<ul>
<li><span class="scalable" data-base="600.0">600</span>g high-protein bread flour</li>
<li><span class="scalable" data-base="166.0">166</span>g hard red wheat flour <span class="paren">(optional, use <span class="scalable" data-base="766.0">766</span>g bread flour otherwise)</span></li>
<li><span class="scalable" data-base="161.0">161</span>g whole wheat flour</li>
<li><span class="scalable" data-base="685.0">685</span>g water</li>
<li><span class="scalable" data-base="20.0">20</span>g salt</li>
<li><span class="scalable" data-base="180.0">180</span>g mature levain</li>
</ul>
<h3>Day-of levain</h3>
<p>This levain will take about <span class="scalable" data-base="5.0">5</span>-<span class="scalable" data-base="6.0">6</span> hours to mature at warmer temperatures <span class="paren">(<span class="scalable" data-base="25.0">25</span>ºC)</span>.</p>
<ul>
<li><span class="scalable" data-base="40.0">40</span>g mature starter</li>
<li><span class="scalable" data-base="40.0">40</span>g bread flour</li>
<li><span class="scalable" data-base="40.0">40</span>g whole wheat flour</li>
<li><span class="scalable" data-base="80.0">80</span>g water</li>
</ul>
<h3>Night-before levain</h3>
<p>This levain will take about <span class="scalable" data-base="10.0">10</span> hours to mature at room temperatures <span class="paren">(<span class="scalable" data-base="22.0">22</span>-<span class="scalable" data-base="24.0">24</span>ºC)</span>.</p>
<ul>
<li><span class="scalable" data-base="8.0">8</span>g mature starter</li>
<li><span class="scalable" data-base="40.0">40</span>g bread flour</li>
<li><span class="scalable" data-base="40.0">40</span>g whole wheat flour</li>
<li><span class="scalable" data-base="80.0">80</span>g water</li>
</ul>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<h3>Levain and autolyse</h3>
<ol>
<li>
<p>Make the levain; you can either make this the night before or the day-of, adjust the amount of
sourdough starter and the ambient temperature of the levain as needed.</p>
</li>
<li>
<p>About 1-2 hours before the levain will be ready, prepare your autolyse<sup id="sf-sourdough-1-back"><a class="simple-footnote" href="#sf-sourdough-1" title="If I am making a
same-day levain, I will often make the autolyse at the same time as the levain, and keep them in
the same location so that they have similar dough temperatures.">1</a></sup>. Mix the flour and all but 50g of the water until fully hydrated, and leave in a warm area.</p>
</li>
</ol>
<h3>Mix</h3>
<ol>
<li>Add the mature levain to the autolysed dough, and mix until incorporated. Then, add the salt and
the reserved 50g of water, and mix until the water has absorbed. Place the dough on the counter and
do slap and folds until the dough strengthens and very nearly passes the window pane test. Move
dough back to the bulk fermentation bowl, perform some stretch and folds, and cover.</li>
</ol>
<h3>Bulk fermentation</h3>
<ol>
<li>Leave the dough in a warm spot to bulk ferment for <strong>3 hours and 30 minutes</strong>. Perform 2 sets of
stretch and folds at the beginning, 30 minutes apart.</li>
</ol>
<h3>Divide and shape</h3>
<ol>
<li>
<p>Scrape the dough onto your counter. Divide the dough into two, and using a bench scraper preshape
each piece of dough into two rounds. Leave for 15-20 minutes for the gluten to relax.</p>
</li>
<li>
<p>Flip the dough over, and shape it into a batard. Pull the corners into a square, and fold the top
down half way. Fold the left and right side into the middle, and the start rolling tightly from the
bottom, sealing tightly with your little fingers, until you have a cylinder. Pinch the ends closed,
and then flip over into the bannetons, seam side up.</p>
</li>
<li>
<p>Dust with rice flour, and place in a sealed plastic bag in the fridge overnight.</p>
</li>
</ol>
<h3>Bake</h3>
<ol>
<li>
<p>Preheat the oven with your dutch oven on a rack on the bottom third to 230ºC. </p>
</li>
<li>
<p>Flip your dough out of the banneton onto two sheets of baking paper or a silicon mat. Brush the
top and score. Take your dutch oven out of the oven, and place the dough inside. Spray with some
water, put on the lid, and bake for 20 minutes covered.</p>
</li>
<li>
<p>Remove the lid, and bake for another 30-35 minutes uncovered. The internal temperature of the
loaf should be 96-99ºC.</p>
</li>
<li>
<p>Leave to rest on a wire rack for at least 2 hours before slicing.</p>
</li>
</ol>
<p><img alt="sourdough" src="/images/recipes/sourdough.jpg"/></p>

        </section>
    </div>

    <div class="recipe-notes">
        <h2>NOTES</h2>
        <script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        <ol class="simple-footnotes"><li id="sf-sourdough-1"><footnote>If I am making a
same-day levain, I will often make the autolyse at the same time as the levain, and keep them in
the same location so that they have similar dough temperatures.</footnote> <a class="simple-footnote-back" href="#sf-sourdough-1-back">↩︎</a></li></ol>

    </div>

    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/wholewheat-sourdough-sandwich-loaf/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/sourdough-loaf3.jpg" alt="Wholewheat sourdough sandwich loaf">
                    </div>

                    <div class="card-details">
                        <h3>Wholewheat sourdough sandwich loaf</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/babka/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/babka.jpg" alt="Babka">
                    </div>

                    <div class="card-details">
                        <h3>Babka</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/challah/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/challah.jpg" alt="Challah">
                    </div>

                    <div class="card-details">
                        <h3>Challah</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>

<script>
function updateTimeline() {
    const input = document.getElementById('start-time-input');
    if (!input) return;

    const [startH, startM] = input.value.split(':').map(Number);
    const startTotalMins = (startH * 60) + startM;

    const steps = document.querySelectorAll('.timeline-step:not(.step-finish)');
    let lastOffset = 0;
    let lastDuration = 0;

    steps.forEach(step => {
        const offset = parseInt(step.dataset.offset);
        const duration = parseInt(step.dataset.duration);

        const timeDisplay = step.querySelector('.step-time');
        // We use innerHTML because we are adding a <span> tag
        timeDisplay.innerHTML = formatTimeWithDay(startTotalMins, offset);

        lastOffset = offset;
        lastDuration = duration;
    });

    const finishEl = document.getElementById('visual-finish-time');
    if (finishEl) {
        finishEl.innerHTML = formatTimeWithDay(startTotalMins, lastOffset + lastDuration);
    }
}

// Helper to format time with "+1 day" badges and convert "750 minutes" -> "12:30 PM"
function formatTimeWithDay(startTotalMins, totalMinutesFromStart) {
    const absoluteMins = startTotalMins + totalMinutesFromStart;

    // Calculate days passed
    // 1440 mins = 24 hours
    const daysPassed = Math.floor(absoluteMins / 1440);

    // Calculate clock time
    let currentMins = absoluteMins % 1440;
    let h = Math.floor(currentMins / 60);
    let m = currentMins % 60;

    const ampm = h >= 12 ? 'p.m.' : 'a.m.';

    h = h % 12;
    h = h ? h : 12; // the hour '0' should be '12'

    // Zero padding for minutes
    const mStr = m < 10 ? '0' + m : m;

    // Zero padding for hours
    const hStr = h < 10 ? '0' + h : h;

    let timeStr = `${hStr}:${mStr} ${ampm}`;

    // Append day badge if needed
    if (daysPassed > 0) {
        timeStr += ` <span class="day-badge">+${daysPassed}d</span>`;
    }

    return timeStr;
}

function toggleTimeline() {
    const box = document.getElementById('timeline-container');
    box.classList.toggle('collapsed');
}

document.addEventListener('DOMContentLoaded', () => updateTimeline());
</script>

<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>