<!DOCTYPE html>
<html lang="en">

<head>

  <title>Challah recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="A light and extremely fluffy challah recipe.
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Challah recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/challah/ ">
  <meta property="og:description" content="A light and extremely fluffy challah recipe.
">
  <meta property="og:image" content="/images/recipes/challah.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/challah/ ">
  <meta name="twitter:title" content="Challah recipe | josh iza.ac">
  <meta name="twitter:description" content="A light and extremely fluffy challah recipe.
">
  <meta name="twitter:image" content="/images/recipes/challah.jpg">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Challah",
          "image": [
            "../..//images/recipes/challah.jpg"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-17 00:00:00+08:00",
          "description": "A light and extremely fluffy challah recipe.",

          "totalTime": "PT4.5H",

          "recipeYield": "One large loaf, or two small loaves. servings",

          "recipeIngredient": [
            "130ml warm water",
            "7g instant yeast",
            "37g sugar",
            "2 large eggs",
            "1 large egg yolk",
            "78g oil (either olive oil or a neutral oil)",
            "1 tsp kosher salt",
            "2-3 cups of bread flour (approximately 375g)",
            "Poppy seeds (can swap this out for sesame seeds, or use a mix)",
            "1 egg",
            "Splash of milk",
            "Flaky salt"
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "Mix yeast, water, eggs, egg yolks, salt, sugar, and oil in a bowl of a stand mixer.
  Using the dough hook, beat on medium-low until mixture is combined1."
            },
            {
              "@type": "HowToStep",
              "text": "Add the flour on medium speed and mix until combined and the dough comes together. Continue
  mixing until the dough is smooth and shiny. It should be tacky to touch but not sticky, about 5-8
  minutes2."
            },
            {
              "@type": "HowToStep",
              "text": "Turn the dough out onto a clean surface and knead for a few minutes by hand. Place dough in a
   lightly oiled large bowl, cover loosely, and leave to rise in a warm spot until doubled in size,
   about 1-1.5 hours."
            },
            {
              "@type": "HowToStep",
              "text": "Punch down the dough, and leave it to rise for another 45 minutes, until doubled in size."
            },
            {
              "@type": "HowToStep",
              "text": "Dump the dough out onto the counter, and divide the dough into 6 even pieces. Form each piece tightly into a ball."
            },
            {
              "@type": "HowToStep",
              "text": "Squish each ball flat into a pancake, and fold the top into the middle, and the bottom into the middle.
   Then, pinch the seam closed – the dough should not be in the shape of a cylinder. Roll each piece out
   to approximately 30cm – its okay if the ends taper into a point."
            },
            {
              "@type": "HowToStep",
              "text": "Place two pieces end-to-end horizontally, and then place the remaining 4 pieces with the ends at the center, pointing
   towards you. Swap the two top strands, and take the strand at the back, and pull it down so that it is in the
   center of all the strands. Replace it with the second-last strand from the opposite side."
            },
            {
              "@type": "HowToStep",
              "text": "Repeat this process (taking the strand at the back and placing it in the middle of the strands, replacing it with
   the second-last strand from the opposite side) until you have a braided loaf; fold the ends underneath the loaf
   to tidy it up."
            },
            {
              "@type": "HowToStep",
              "text": "Make an egg wash with the egg, splash of milk, and a pinch of salt, and brust all over the challah
   using a pastry brush. Leave to rise in a warm spot for about an hour, until doubled in size."
            },
            {
              "@type": "HowToStep",
              "text": "Preheat the oven to 200ºC"
            },
            {
              "@type": "HowToStep",
              "text": "Brush the challah with another layer of egg wash, and sprinkle poppy seeds and flaky salt. Bake
   for 15 minutes before turning the challah around. Bake for another 10-15 minutes
   until evenly brown all over."
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">

<style>
@media (min-width: 768px) {
    .recipe-ingredients {
        position: -webkit-sticky;
        position: sticky;
        top: 20px;
        z-index: 10;
        max-height: calc(100vh - 40px);
        overflow-y: auto;
    }
    .article-container {
        overflow: unset;
    }
}
</style>

<article class="recipe-container">

    <header class="recipe-header">

        <div class="hero-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/recipes/challah.jpg');">
            <h1 class="recipe-title hero-text">Challah</h1>
        </div>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>4.5 hours</span>
                <span>MAKES</span><span id="servings-badge" data-original="One large loaf, or two small loaves.">One large loaf, or two small loaves.</span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/challah.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>A light and extremely fluffy challah recipe.</p>

        </div>
    </header>

    <div class="timeline-container collapsed" id="timeline-container">
        <h2 onclick="toggleTimeline()" class="timeline-header">Cooking Schedule<i class="timeline-arrow fas fa-angle-down"></i></h2>

        <div id="timeline-content">

            <div class="timeline-visual">
                <div class="timeline-step step-active"
                     data-offset="0"
                     data-duration="15">

                    <input type="time" id="start-time-input" value="09:00" oninput="updateTimeline()">
                    <div class="step-time" style="display: none;">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Mix Ingredients</span>
                        <span class="step-duration">
                            (15 min)
                            <!--  -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="15"
                     data-duration="60">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">First proof</span>
                        <span class="step-duration">
                            (60 min)
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="75"
                     data-duration="45">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Second proof</span>
                        <span class="step-duration">
                            (45 min)
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-active"
                     data-offset="120"
                     data-duration="15">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Shape</span>
                        <span class="step-duration">
                            (15 min)
                            <!--  -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="135"
                     data-duration="60">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Proof</span>
                        <span class="step-duration">
                            (60 min)
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>
                <div class="timeline-step step-wait"
                     data-offset="195"
                     data-duration="30">

                    <div class="step-time">00:00</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        <div class="marker-line"></div>
                    </div>

                    <div class="step-content">
                        <span class="step-name">Bake</span>
                        <span class="step-duration">
                            (30 min)
                            <!-- (Passive) -->
                        </span>
                    </div>
                </div>

                <div class="timeline-step step-finish">
                    <div class="step-time" id="visual-finish-time">--:--</div>

                    <div class="step-marker">
                        <div class="marker-dot"></div>
                        </div>

                    <div class="step-content">
                        <span class="step-name">Finished!   </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<h3>Dough</h3>
<ul>
<li><span class="scalable" data-base="130.0">130</span>ml warm water</li>
<li><span class="scalable" data-base="7.0">7</span>g instant yeast</li>
<li><span class="scalable" data-base="37.0">37</span>g sugar</li>
<li><span class="scalable" data-base="2.0">2</span> large eggs</li>
<li><span class="scalable" data-base="1.0">1</span> large egg yolk</li>
<li><span class="scalable" data-base="78.0">78</span>g oil <span class="paren">(either olive oil or a neutral oil)</span></li>
<li><span class="scalable" data-base="1.0">1</span> tsp kosher salt</li>
<li><span class="scalable" data-base="2.0">2</span>-<span class="scalable" data-base="3.0">3</span> cups of bread flour <span class="paren">(approximately <span class="scalable" data-base="375.0">375</span>g)</span></li>
</ul>
<h3>Toppings</h3>
<ul>
<li>Poppy seeds <span class="paren">(can swap this out for sesame seeds, or use a mix)</span></li>
<li><span class="scalable" data-base="1.0">1</span> egg</li>
<li>Splash of milk</li>
<li>Flaky salt</li>
</ul>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<h3>Dough</h3>
<ol>
<li>
<p>Mix yeast, water, eggs, egg yolks, salt, sugar, and oil in a bowl of a stand mixer.
  Using the dough hook, beat on medium-low until mixture is combined<sup id="sf-challah-1-back"><a class="simple-footnote" href="#sf-challah-1" title="I have tried making this
  with a tanzhong of 30g flour and 120g whole milk; simply reduce the water in the main recipe to
  about 50g. This works well, but the difference in the bread was too minimal for me to recognize, so
  I often leave this out.">1</a></sup>.</p>
</li>
<li>
<p>Add the flour on medium speed and mix until combined and the dough comes together. Continue
  mixing until the dough is smooth and shiny. It should be tacky to touch but not sticky, about 5-8
  minutes<sup id="sf-challah-2-back"><a class="simple-footnote" href="#sf-challah-2" title="You may need to increase the amount of flour to reach the tacky-but-not-sticky stage,
  it is very dependent on the type of flour and the humidity.">2</a></sup>.</p>
</li>
<li>
<p>Turn the dough out onto a clean surface and knead for a few minutes by hand. Place dough in a
   lightly oiled large bowl, cover loosely, and leave to rise in a warm spot until doubled in size,
   about 1-1.5 hours.</p>
</li>
<li>
<p>Punch down the dough, and leave it to rise for another 45 minutes, until doubled in size.</p>
</li>
</ol>
<h3>Braiding</h3>
<p>For braiding the challah, I like to do a 6 strand braid.</p>
<ol>
<li>
<p>Dump the dough out onto the counter, and divide the dough into 6 even pieces. Form each piece tightly into a ball.</p>
</li>
<li>
<p>Squish each ball flat into a pancake, and fold the top into the middle, and the bottom into the middle.
   Then, pinch the seam closed – the dough should not be in the shape of a cylinder. Roll each piece out
   to approximately 30cm – its okay if the ends taper into a point.</p>
</li>
<li>
<p>Place two pieces end-to-end horizontally, and then place the remaining 4 pieces with the ends at the center, pointing
   towards you. Swap the two top strands, and take the strand at the back, and pull it down so that it is in the
   center of all the strands. Replace it with the second-last strand from the opposite side.</p>
</li>
<li>
<p>Repeat this process (taking the strand at the back and placing it in the middle of the strands, replacing it with
   the second-last strand from the opposite side) until you have a braided loaf; fold the ends underneath the loaf
   to tidy it up.</p>
</li>
<li>
<p>Make an egg wash with the egg, splash of milk, and a pinch of salt, and brust all over the challah
   using a pastry brush. Leave to rise in a warm spot for about an hour, until doubled in size.</p>
</li>
</ol>
<h3>Baking</h3>
<ol>
<li>
<p>Preheat the oven to 200ºC</p>
</li>
<li>
<p>Brush the challah with another layer of egg wash, and sprinkle poppy seeds and flaky salt. Bake
   for 15 minutes before turning the challah around. Bake for another 10-15 minutes
   until evenly brown all over.</p>
</li>
</ol>

        </section>
    </div>

    <div class="recipe-notes">
        <h2>NOTES</h2>
        
<h3>Round challah</h3>
<ul>
<li>
<p>To make a round challah, instead divide the dough into 8 even pieces. Roll out each strand as
  above, but this time pair up the strands into 4 groups of 2.</p>
<p>Place 2 of the groups horizontal, and 2 vertical crossing over at the middle, to make a square
grid in the center. Then weave the grid; lift the top strand of the right vertical pair and slide
the top horizontal pair under it. Do the same on the bottom left—lift the strand and slide the
bottom pair under.</p>
<p>Now, cross over each strand. Continue, crossing over alternate strands, until you have a circular
shape; tuck the ends of the strands under the challah.</p>
</li>
</ul><script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        <ol class="simple-footnotes"><li id="sf-challah-1"><footnote>I have tried making this
  with a tanzhong of 30g flour and 120g whole milk; simply reduce the water in the main recipe to
  about 50g. This works well, but the difference in the bread was too minimal for me to recognize, so
  I often leave this out.</footnote> <a class="simple-footnote-back" href="#sf-challah-1-back">↩︎</a></li><li id="sf-challah-2"><footnote>You may need to increase the amount of flour to reach the tacky-but-not-sticky stage,
  it is very dependent on the type of flour and the humidity.</footnote> <a class="simple-footnote-back" href="#sf-challah-2-back">↩︎</a></li></ol>

    </div>

    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/babka/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/babka.jpg" alt="Babka">
                    </div>

                    <div class="card-details">
                        <h3>Babka</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/jam-doughnuts/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/doughnuts.jpg" alt="Jam doughnuts">
                    </div>

                    <div class="card-details">
                        <h3>Jam doughnuts</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/shio-pan/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/shio-pan.jpg" alt="Shio pan">
                    </div>

                    <div class="card-details">
                        <h3>Shio pan</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>

<script>
function updateTimeline() {
    const input = document.getElementById('start-time-input');
    if (!input) return;

    const [startH, startM] = input.value.split(':').map(Number);
    const startTotalMins = (startH * 60) + startM;

    const steps = document.querySelectorAll('.timeline-step:not(.step-finish)');
    let lastOffset = 0;
    let lastDuration = 0;

    steps.forEach(step => {
        const offset = parseInt(step.dataset.offset);
        const duration = parseInt(step.dataset.duration);

        const timeDisplay = step.querySelector('.step-time');
        // We use innerHTML because we are adding a <span> tag
        timeDisplay.innerHTML = formatTimeWithDay(startTotalMins, offset);

        lastOffset = offset;
        lastDuration = duration;
    });

    const finishEl = document.getElementById('visual-finish-time');
    if (finishEl) {
        finishEl.innerHTML = formatTimeWithDay(startTotalMins, lastOffset + lastDuration);
    }
}

// Helper to format time with "+1 day" badges and convert "750 minutes" -> "12:30 PM"
function formatTimeWithDay(startTotalMins, totalMinutesFromStart) {
    const absoluteMins = startTotalMins + totalMinutesFromStart;

    // Calculate days passed
    // 1440 mins = 24 hours
    const daysPassed = Math.floor(absoluteMins / 1440);

    // Calculate clock time
    let currentMins = absoluteMins % 1440;
    let h = Math.floor(currentMins / 60);
    let m = currentMins % 60;

    const ampm = h >= 12 ? 'p.m.' : 'a.m.';

    h = h % 12;
    h = h ? h : 12; // the hour '0' should be '12'

    // Zero padding for minutes
    const mStr = m < 10 ? '0' + m : m;

    // Zero padding for hours
    const hStr = h < 10 ? '0' + h : h;

    let timeStr = `${hStr}:${mStr} ${ampm}`;

    // Append day badge if needed
    if (daysPassed > 0) {
        timeStr += ` <span class="day-badge">+${daysPassed}d</span>`;
    }

    return timeStr;
}

function toggleTimeline() {
    const box = document.getElementById('timeline-container');
    box.classList.toggle('collapsed');
}

document.addEventListener('DOMContentLoaded', () => updateTimeline());
</script>

<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>