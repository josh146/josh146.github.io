<!DOCTYPE html>
<html lang="en">

<head>

  <title>Cantonese-style bao recipe | josh iza.ac</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Josh Izaac">
  <meta name="description" content="Unlike northern Chinese bao dough (which has a bit of chew), Cantonese bao dough is exceptionally fluffy, sweeter, and has very little chewiness — a result of using low-protein flour, more sugar, an alkaline dough, and western-style leavening agents. The following bao dough...
">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Facebook Meta Tags -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Cantonese-style bao recipe | josh iza.ac">
  <meta property="og:url" content=" recipes/cantonese-style-bao/ ">
  <meta property="og:description" content="Unlike northern Chinese bao dough (which has a bit of chew), Cantonese bao dough is exceptionally fluffy, sweeter, and has very little chewiness — a result of using low-protein flour, more sugar, an alkaline dough, and western-style leavening agents. The following bao dough...
">
  <meta property="og:image" content="/images/recipes/cantonese-style-bao.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="../..">
  <meta property="twitter:url" content=" recipes/cantonese-style-bao/ ">
  <meta name="twitter:title" content="Cantonese-style bao recipe | josh iza.ac">
  <meta name="twitter:description" content="Unlike northern Chinese bao dough (which has a bit of chew), Cantonese bao dough is exceptionally fluffy, sweeter, and has very little chewiness — a result of using low-protein flour, more sugar, an alkaline dough, and western-style leavening agents. The following bao dough...
">
  <meta name="twitter:image" content="/images/recipes/cantonese-style-bao.jpg">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../../theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="../../theme/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/recipe_gallery.css" type="text/css" media="all">
  <link rel="stylesheet" href="../../theme/css/pygments.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>

  <script type="module" src="https://unpkg.com/ninja-keys?module"></script>


<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../../theme/js/functions.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="http://iza.ac/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="josh iza.ac Full Atom Feed" />

      <meta name="keywords" content="keywords, pytorch, quantum, gradients, tensorflow">

    <link rel="stylesheet" href="../../theme/css/recipe.css">
    <script type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Recipe",
          "name": "Cantonese-style bao",
          "image": [
            "../..//images/recipes/cantonese-style-bao.jpg"
          ],
          "author": {
            "@type": "Person",
            "name": "Josh Izaac"
          },
          "datePublished": "2025-12-26 00:00:00+08:00",
          "description": "Unlike northern Chinese bao dough (which has a bit of chew), Cantonese bao dough is exceptionally fluffy, sweeter, and has very little chewiness — a result...",

          "totalTime": "PT6H",

          "recipeYield": "12 servings",

          "recipeIngredient": [
            "200g cake flour1",
            "115g milk",
            "1 tbsp sugar",
            "1 tsp (3.5g) instant yeast",
            "315g starter dough",
            "100g cake flour",
            "80g sugar",
            "20g water",
            "10g butter",
            "1/2 tsp baking powder",
            "1/2 tsp ammonia bicarbonate (if not available, use 3/4 tsp baking powder above instead)",
            "75g unsalted butter (softened)",
            "28g sugar",
            "50g cake flour",
            "1 egg lightly beaten or 6g vegetable oil"
          ],

          "recipeInstructions": [
            {
              "@type": "HowToStep",
              "text": "Mix all the starter dough ingredients either by hand or by a mixer until a slightly wet dough is
formed. Cover the dough with a plastic wrap and let it rise for 4-6 hours or leave in the fridge
over night. The dough should at least double in size. If storing it in the fridge, bring the dough
back to room temperature before making the sweet dough."
            },
            {
              "@type": "HowToStep",
              "text": "Combine the starter dough with 80g of sugar in a stand mixer. Knead the dough until the sugar is
fully dissolved. You should notice that the dough is wetter and stickier."
            },
            {
              "@type": "HowToStep",
              "text": "Combine the cake flour, baking powder, ammonium if using in a bowl and sift to remove all the
crumbs. Add sifted flour mixture and water to the dough in batches. Knead the dough to incorporate
the dry and wet ingredients. When the dough forms a ball, add butter and let it knead for another 5
minutes or so. Once the dough is done, cover and let it rest for 20 minutes."
            },
            {
              "@type": "HowToStep",
              "text": "After filling, let the buns rest for 30 minutes and steam over high heat for 10 minutes. Once the
  heat is off, leave the lid on for additional 2 minutes before removing the lid and serving. These
  buns need to be served hot!"
            },
            {
              "@type": "HowToStep",
              "text": "Beat butter and sugar at low speed until combined. Adjust to high speed and beat until mixture is
  light and fluffy. If using egg, gradually beat in the lightly whipped egg to avoid curdling."
            },
            {
              "@type": "HowToStep",
              "text": "Remove bowl, add the cake flour and mix well. If not using an egg, now add in the oil and stir
  with a spatula until well combined. Add to a piping bag, and refrigerate until needed. Before
  using, remove from the fridge for 5-10 minutes or until at room temperature."
            },
            {
              "@type": "HowToStep",
              "text": "Preheat the oven to 180ºC, and bake for 15 minutes until golden brown."
            }
          ]
        }
    </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-308113-3', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-expand-lg navbar-default" role="navigation">
        <div class="container">
          <div class="row" style="width: 100%;">
            <div class="site-navigation-inner col-sm-12">
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="social fas fa-ellipsis-v"></i>
              </button>

              <div class="collapse navbar-collapse navbar-ex1-collapse" id="navbarSupportedContent" style="float: left;">
                <ul id="menu-all-pages" class="nav navbar-nav mr-auto" style="padding: 20px;">
                  <li class="menu-item"><a href="/" >Home

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/about" >About

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/cv" >CV

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/recipes" >recipes

<i class=" fa-lg" style=""></i></a></li>
                  <li class="menu-item"><a href="/posts" >posts

<i class=" fa-lg" style=""></i></a></li>
                </ul>
              </div>
              <div class="social">
                <a href="https://scholar.google.com/citations?user=pEj09c4AAAAJ" title="Google Scholar" >

<i class="ai ai-google-scholar fa-lg" style="font-size: 1.6rem;"></i></a>
                <a href="http://github.com/josh146" title="GitHub" >

<i class="fab fa-github fa-lg" style=""></i></a>
                <a href="https://linkedin.com/pub/josh-izaac/104/9bb/6a2" title="LinkedIn" >

<i class="fab fa-linkedin fa-lg" style=""></i></a>
                <a data-email="ca.azi@hsoj:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email">

<i class="fas fa-envelope fa-lg" style=""></i></a>
                <a href="/feeds/rss.xml" title="Feed" >

<i class="fas fa-rss fa-lg" style=""></i></a>
               <a href="#" onClick="const ninja=document.querySelector('ninja-keys');ninja.open();"><i class="fas fa-search"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->


  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">


<article class="recipe-container">

    <header class="recipe-header">

        <div class="hero-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/recipes/cantonese-style-bao.jpg');">
            <h1 class="recipe-title hero-text">Cantonese-style bao</h1>
        </div>

        <div class="recipe-meta-badges">
                <span>TIME</span><span>6 hours</span>
                <span>MAKES</span><span id="servings-badge" data-original="12"><span class="scalable" data-base="12.0">12</span></span>
                <span class="scale-label">PORTION</span>
                <div class="scale-controls">
                    <a class="scale-btn" onclick="scaleRecipe(0.5, this)">0.5x</a>
                    <a class="scale-btn active" onclick="scaleRecipe(1, this)">1x</a>
                    <a class="scale-btn" onclick="scaleRecipe(2, this)">2x</a>
                    <a class="scale-btn" onclick="scaleRecipe(3, this)">3x</a>
                </div>
        </div>
<!--         <div class="github-link">
            <a href="https://github.com/josh146/josh146.github.io/blob/source/content/recipes/cantonese-style-bao.md"
               target="_blank">
               VIEW SOURCE
            </a>
        </div> -->

        <div class="recipe-intro">
            <p>Unlike northern Chinese bao dough (which has a bit of chew), Cantonese bao dough is exceptionally fluffy, sweeter, and has very little chewiness — a result of using low-protein flour, more sugar, an alkaline dough, and western-style leavening agents.</p>
<p>The following bao dough is adapted from the recipe for char siu bao from <a href="https://yireservation.com/recipes/steamed-bbq-pork-bun/">Yi Reservation</a>, but can be used for <em>any</em>
sweet or savoury filling, such as hoisin duck, or salted egg yolk.</p>
<p>Traditionally for char siu bao, ammonium bicarbonate is added to the dough, which results in the
typical ‘smiling cracks’ look at the top of the bun. If you don’t have access to ammonium, use
slightly more baking powder instead — you’ll most likely not see the ‘smiling cracks’ but the
buns are equally tasty.</p>
<p>For cooking the bao, you have two options:</p>
<ul>
<li>Steaming them, seam side up, or</li>
<li>Snow mountain bun style: Baking them, seam side down, with a cookie dough piped on top to give a sweet crunchy crust.</li>
</ul>
<div id="variation-controls"></div>

        </div>
    </header>


    <div class="recipe-grid">
        <section class="recipe-ingredients">
            <h2>INGREDIENTS</h2>
            
<h3>Bao starter dough</h3>
<ul>
<li><span class="scalable" data-base="200.0">200</span>g cake flour<sup id="sf-cantonese-style-bao-1-back"><a class="simple-footnote" href="#sf-cantonese-style-bao-1" title="To make your own cake flour, add 2 tbsp, about 14g, of cornflour for every 100g of flour.">1</a></sup></li>
<li><span class="scalable" data-base="115.0">115</span>g milk</li>
<li><span class="scalable" data-base="1.0">1</span> tbsp sugar</li>
<li><span class="scalable" data-base="1.0">1</span> tsp <span class="paren">(<span class="scalable" data-base="3.5">3.5</span>g)</span> instant yeast</li>
</ul>
<h3>Cantonese bao dough</h3>
<ul>
<li><span class="scalable" data-base="315.0">315</span>g starter dough</li>
<li><span class="scalable" data-base="100.0">100</span>g cake flour</li>
<li><span class="scalable" data-base="80.0">80</span>g sugar</li>
<li><span class="scalable" data-base="20.0">20</span>g water</li>
<li><span class="scalable" data-base="10.0">10</span>g butter</li>
<li><span class="scalable" data-base="0.5">1/2</span> tsp baking powder</li>
<li><span class="scalable" data-base="0.5">1/2</span> tsp ammonia bicarbonate <span class="paren">(if not available, use <span class="scalable" data-base="0.75">3/4</span> tsp baking powder above instead)</span></li>
</ul>
<h3>Filling</h3>
<p>Typical fillings include cha siu, nai wong <span class="paren">(custard)</span>, but you can get creative and and use hoisin duck, chocolate, kaya, etc.</p>
<p>{{filling_list}}</p>
<h3>Snow mountain topping <span class="paren">(optional)</span></h3>
<ul>
<li><span class="scalable" data-base="75.0">75</span>g unsalted butter <span class="paren">(softened)</span></li>
<li><span class="scalable" data-base="28.0">28</span>g sugar</li>
<li><span class="scalable" data-base="50.0">50</span>g cake flour</li>
<li><span class="scalable" data-base="1.0">1</span> egg lightly beaten or <span class="scalable" data-base="6.0">6</span>g vegetable oil</li>
</ul>
<pre id="variation-yaml" style="display:none;">Theme: Cha siu chicken

filling_list: <span class="scalable" data-base="100.0">100</span>g roasted chicken thighs <span class="paren">(chopped into small cubes)</span>; <span class="scalable" data-base="125.0">125</span>g water; <span class="scalable" data-base="25.0">25</span>g brown sugar; <span class="scalable" data-base="10.0">10</span>g corn flour; <span class="scalable" data-base="1.0">1</span> tbsp hoisin sauce; <span class="scalable" data-base="0.5">1/2</span> tbsp oyster sauce; <span class="scalable" data-base="1.0">1</span> tsp Shaoxing wine; <span class="scalable" data-base="1.0">1</span> tsp soy sauce; <span class="scalable" data-base="0.5">1/2</span> tsp white pepper; Large pinch of salt

filling_step: In a sauce pan, combine all filling ingredients <span class="paren">(except the chicken)</span> to make a sauce, and mix well. Bring the mixture to boil and then reduce to a simmer, stirring occasionally. Turn off the heat when the mixture reaches the consistency of a thick paste, and mix in the chicken. Cover and chill in the fridge for at least <span class="scalable" data-base="2.0">2</span> hours before using.

---

Theme: Black pepper duck

filling_list: <span class="scalable" data-base="100.0">100</span>g roasted or confit duck <span class="paren">(chopped into small cubes)</span>; <span class="scalable" data-base="1.0">1</span> spring onion <span class="paren">(finely diced)</span>; <span class="scalable" data-base="125.0">125</span>g water; <span class="scalable" data-base="3.0">3</span> tbsp hoisin sauce; <span class="scalable" data-base="1.0">1</span> tsp five spice powder; <span class="scalable" data-base="2.0">2</span> tsp black pepper; <span class="scalable" data-base="10.0">10</span>g corn flour; <span class="scalable" data-base="1.0">1</span> tsp soy sauce; Large pinch of salt


filling_step: In a sauce pan, combine all filling ingredients <span class="paren">(except the duck)</span> to make a sauce, and
mix well. Bring the mixture to boil and then reduce to a simmer, stirring occasionally. Turn off
the heat when the mixture reaches the consistency of a thick paste, and mix in the chicken. Cover
and chill in the fridge for at least <span class="scalable" data-base="2.0">2</span> hours before using.

---

Theme: Molten salted egg custard <span class="paren">(liu sha bao)</span> 

filling_list: <span class="scalable" data-base="3.0">3</span> salted egg yolks; <span class="scalable" data-base="0.5">1/2</span> tbsp clear rice wine <span class="paren">(can use Cantonese rose wine or sake)</span>; <span class="scalable" data-base="50.0">50</span>g unsalted butter; <span class="scalable" data-base="40.0">40</span>g icing sugar; <span class="scalable" data-base="30.0">30</span>g milk powder; <span class="scalable" data-base="2.0">2</span> tbsp evaporated milk; <span class="scalable" data-base="20.0">20</span>g cornflour

filling_step: Mix the salted egg yolks with the wine, and steam for <span class="scalable" data-base="10.0">10</span> minutes. Mash the steamed egg yolks with a fork until you get a smooth paste. Next, whisk together the butter and icing sugar until fluffy; add in the salted egg yolks, milk powder, evaporated milk, and cornflour, and mix until the texture of buttercream. Transfer to an airtight container, and refrigerate or freeze until solid enough to portion for the bao.

---

Theme: Chickpea and tomato

filling_list: <span class="scalable" data-base="220.0">220</span>g chickpeas; <span class="scalable" data-base="1.0">1</span> tsp garam masala; <span class="scalable" data-base="0.5">1/2</span> lemon juiced; <span class="scalable" data-base="0.5">1/2</span> tsp garlic powder; <span class="scalable" data-base="0.5">1/2</span> tsp garlic powder; <span class="scalable" data-base="0.5">1/2</span> tsp chili powder; <span class="scalable" data-base="1.0">1</span> tsp gochujang; <span class="scalable" data-base="1.0">1</span> spring onion <span class="paren">(finely diced)</span>; <span class="scalable" data-base="1.0">1</span> tomato <span class="paren">(finely diced)</span>; coriander <span class="paren">(finely diced)</span>; Large pinch of salt

filling_step: Rinse the chickpeas and add them to a bowl, and mash with a fork. Add the remaining ingredients and mix well, adding salt to taste.
</pre>

        </section>

        <section class="recipe-method">
            <h2>STEPS</h2>
            
<ol>
<li>
<p>Mix all the starter dough ingredients either by hand or by a mixer until a slightly wet dough is
formed. Cover the dough with a plastic wrap and let it rise for 4-6 hours or leave in the fridge
over night. The dough should at least double in size. If storing it in the fridge, bring the dough
back to room temperature before making the sweet dough.</p>
</li>
<li>
<p>Combine the starter dough with 80g of sugar in a stand mixer. Knead the dough until the sugar is
fully dissolved. You should notice that the dough is wetter and stickier.</p>
</li>
<li>
<p>Combine the cake flour, baking powder, ammonium if using in a bowl and sift to remove all the
crumbs. Add sifted flour mixture and water to the dough in batches. Knead the dough to incorporate
the dry and wet ingredients. When the dough forms a ball, add butter and let it knead for another 5
minutes or so. Once the dough is done, cover and let it rest for 20 minutes.</p>
</li>
</ol>
<p>{{filling_step}}</p>
<p>For cooking, choose between steaming them, or baking them (‘snow mountain bun style’):</p>
<h3>Steaming</h3>
<ol>
<li>After filling, let the buns rest for 30 minutes and steam over high heat for 10 minutes. Once the
  heat is off, leave the lid on for additional 2 minutes before removing the lid and serving. These
  buns need to be served hot!</li>
</ol>
<h3>Topping and baking</h3>
<ol>
<li>
<p>Beat butter and sugar at low speed until combined. Adjust to high speed and beat until mixture is
  light and fluffy. If using egg, gradually beat in the lightly whipped egg to avoid curdling.</p>
</li>
<li>
<p>Remove bowl, add the cake flour and mix well. If not using an egg, now add in the oil and stir
  with a spatula until well combined. Add to a piping bag, and refrigerate until needed. Before
  using, remove from the fridge for 5-10 minutes or until at room temperature.</p>
</li>
<li>
<p>Preheat the oven to 180ºC, and bake for 15 minutes until golden brown.</p>
</li>
</ol>

        </section>
    </div>

    <div class="recipe-notes">
        <h2>NOTES</h2>
        
<p>If you decide to steam the buns with ‘smiling cracks’, you do not need to make nice folds as you
close the dough. Instead you just need to bring all sides together to enclose the bun. Make sure
you have a nice amount of dough on top. Otherwise, simply close the bun like you would a soup dumpling.</p><script charset="utf-8" src="//platform.twitter.com/widgets.js"></script>
        <ol class="simple-footnotes"><li id="sf-cantonese-style-bao-1"><footnote>To make your own cake flour, add 2 tbsp, about 14g, of cornflour for every 100g of flour.</footnote> <a class="simple-footnote-back" href="#sf-cantonese-style-bao-1-back">↩︎</a></li></ol>

    </div>

    <div class="related">
        <h2>Related</h2>
        <div id="recipe-gallery" class="recipe-gallery">
            <div class="recipe-card">
                <a href="/recipes/chicken-xiao-long-bao/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/xiao-long-bao.jpg" alt="Chicken xiao long bao">
                    </div>

                    <div class="card-details">
                        <h3>Chicken xiao long bao</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/hong-kong-style-roast-duck/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/roast-duck.jpg" alt="Hong Kong style roast duck">
                    </div>

                    <div class="card-details">
                        <h3>Hong Kong style roast duck</h3>
                    </div>
                </a>
            </div>
            <div class="recipe-card">
                <a href="/recipes/sheng-jian-bao/">
                    <div class="card-image-wrapper">
                        <img src="/images/recipes/sheng-jian-bao.jpg" alt="Sheng jian bao">
                    </div>

                    <div class="card-details">
                        <h3>Sheng jian bao</h3>
                    </div>
                </a>
            </div>
        </div>
    </div>

</article>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ingredientContainer = document.querySelector('.recipe-ingredients');

    if (ingredientContainer) {
        ingredientContainer.addEventListener('click', function(e) {
            const li = e.target.closest('li');

            // If we didn't click inside an li, or we clicked the container padding, ignore.
            if (!li) return;

            // check if the user clicked an interactive element
            if (e.target.closest('a')) {
                return;
            }

            li.classList.toggle('done');
        });
    }
});
</script>

<script>
function scaleRecipe(multiplier, btnElement) {
    document.querySelectorAll('.scale-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    btnElement.classList.add('active');

    document.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }
    });


    // update Servings Badge
    const servBadge = document.getElementById('servings-badge');
    servBadge.querySelectorAll('.scalable').forEach(el => {
        const baseVal = parseFloat(el.dataset.base);
        if (!isNaN(baseVal)) {
            const newVal = baseVal * multiplier;

            // Remove trailing zeros (e.g. 2.50 -> 2.5)
            // parseFloat(num.toFixed(2)) handles rounding to 2 decimal places
            // and stripping unnecessary zeros automatically.
            el.innerText = parseFloat(newVal.toFixed(2));
        }

    });
}
</script>

<script>
document.querySelectorAll('.recipe-method li').forEach(li => {
    li.addEventListener('click', function() {
        const parent = this.parentNode;

        // if clicking the already highlighted item, turn off focus mode
        if (this.classList.contains('highlighted')) {
            this.classList.remove('highlighted');
            parent.classList.remove('focus-active');
        } else {
            // remove highlight from others
            parent.querySelectorAll('li').forEach(el => el.classList.remove('highlighted'));

            // highlight this one
            this.classList.add('highlighted');
            parent.classList.add('focus-active');
        }
    });
});
</script>


<script>
// Add hover preview for component links
document.querySelectorAll('.component-link').forEach(link => {
    const isDesktop = window.matchMedia("(pointer: fine)").matches;

    if (isDesktop) {
        link.addEventListener('mouseenter', async function() {
            // Create tooltip if it doesn't exist
            let tooltip = document.getElementById('recipe-preview-tooltip');
            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = 'recipe-preview-tooltip';
                document.body.appendChild(tooltip);
            }

            // Position it
            const rect = this.getBoundingClientRect();
            tooltip.style.left = `${rect.left}px`;
            tooltip.style.top = `${rect.bottom + 5}px`;
            tooltip.style.display = 'block';
            tooltip.innerHTML = 'Loading...';

            // Fetch the linked page
            try {
                const response = await fetch(this.href);
                const text = await response.text();

                // Parse the response to grab just the ingredients list
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Assuming your ingredients are in a container with class 'recipe-ingredients'
                const ingredients = doc.querySelector('.recipe-ingredients ul').innerHTML;
                const title = doc.querySelector('h1').innerText;
                const imageURL = extractBackgroundUrl(doc, '.hero-image');

                tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} />`;
                // tooltip.innerHTML = `<strong>${title}</strong><img src=${imageURL} /><ul>${ingredients}</ul>`;
            } catch (e) {
                tooltip.style.display = 'none';
                console.log('Error loading preview.');
            }
        });

        link.addEventListener('mouseleave', () => {
            const tooltip = document.getElementById('recipe-preview-tooltip');
            if (tooltip) tooltip.style.display = 'none';
        });
    } else {
        console.log("Not a fine pointer device, 'mouseenter' event listener not attached.");
    }
});

function extractBackgroundUrl(doc, el) {
    const element = doc.querySelector(el);
    const backgroundImage = element.style.backgroundImage;
    const url = backgroundImage.slice(61, -1).replace(/['"]/g, "");
    return url;
}
</script>

<script>
// Blueprint recipes
document.addEventListener('DOMContentLoaded', () => {
    const yamlBlock = document.getElementById('variation-yaml');
    if (!yamlBlock) return;

    const rawText = yamlBlock.innerText;
    const variations = {};

    // Split by the separator "---" to get each theme block
    const blocks = rawText.split('---');

    blocks.forEach(block => {
        if (!block.trim()) return; // Skip empty blocks

        const currentThemeData = {};
        let themeName = null;

        // Split by lines
        const lines = block.trim().split('\n');

        lines.forEach(line => {
            // Find the first colon to separate Key and Value
            const separatorIndex = line.indexOf(':');
            if (separatorIndex === -1) return; // Skip invalid lines

            const key = line.substring(0, separatorIndex).trim();
            const value = line.substring(separatorIndex + 1).trim();

            if (key === 'Theme') {
                themeName = value;
            } else {
                currentThemeData[key] = value;
            }
        });

        if (themeName) {
            variations[themeName] = currentThemeData;
        }
    });

    // build the UI Controls
    const controlContainer = document.getElementById('variation-controls');
    controlContainer.innerHTML = '<span class="vibe-label">Choose your Vibe</span>';

    const btnGroup = document.createElement('div');
    btnGroup.className = 'vibe-buttons';

    // create a "Blueprint" (Reset) button
    const resetBtn = document.createElement('button');
    resetBtn.innerText = 'Blueprint';
    resetBtn.className = 'vibe-btn active';
    resetBtn.id = 'Blueprint';
    resetBtn.onclick = () => applyVariation('Blueprint', resetBtn);
    btnGroup.appendChild(resetBtn);

    // create buttons for each theme
    Object.keys(variations).forEach(theme => {
        const btn = document.createElement('button');
        btn.innerText = theme;
        btn.className = 'vibe-btn';
        btn.id = theme;
        btn.onclick = () => applyVariation(theme, btn);
        btnGroup.appendChild(btn);
    });

    controlContainer.appendChild(btnGroup);

    let blueprintsInitialized = false;

    function applyVariation(themeName, clickedBtn) {
        const url = new URL(window.location);
        url.searchParams.set('vibe', themeName);
        window.history.replaceState({}, '', url);

        // update Buttons Visual State
        document.querySelectorAll('.vibe-btn').forEach(b => b.classList.remove('active'));
        if (clickedBtn) clickedBtn.classList.add('active');

        // Find placeholders in the DOM
        if (!blueprintsInitialized) {
            const contentArea = document.querySelector('.recipe-container');
            if (contentArea) {
                const walker = document.createTreeWalker(contentArea, NodeFilter.SHOW_TEXT, null, false);
                let node;
                // split the string so Pelican/Jinja doesn't try to parse it
                const startBracket = '{' + '{';

                while(node = walker.nextNode()) {
                    if (node.nodeValue.includes(startBracket)) {
                        const parent = node.parentNode;
                        // Save original text if not already saved
                        if (!parent.hasAttribute('data-blueprint')) {
                            parent.setAttribute('data-blueprint', parent.innerHTML);
                            parent.classList.add('dynamic-slot');
                        }
                    }
                }
                blueprintsInitialized = true;
            }
        }

        // the update loop
        const slots = document.querySelectorAll('.dynamic-slot');

        slots.forEach(slot => {
            let htmlToUpdate = slot.getAttribute('data-blueprint');

            // Reset parent styling (Assume standard item first)
            if (slot.parentElement && slot.parentElement.tagName === 'LI') {
                slot.parentElement.classList.remove('is-sublist-parent');
            }

            // apply defined replacements
            if (themeName && variations[themeName]) {
                const replacements = variations[themeName];

                Object.keys(replacements).forEach(key => {
                    const regex = new RegExp('{' + '{' + key + '}' + '}', 'g');
                    let value = replacements[key];

                    // If this key exists in the current theme, replace it
                    if (value) {
                        if (key.includes('list')) {
                            // Multi-item List Logic
                            const items = value.split(';').map(item => `<li>${item.trim()}</li>`).join('');
                            value = `<ul class="dynamic-sublist">${items}</ul>`;
                        } else if (key.includes('step')) {
                            // step logic
                            value = `<ol class="dynamic-sublist"><li><strong>${value}</strong></li></ol>`;

                        } else {
                            // Standard Single Item
                            value = `<strong>${value}</strong>`;
                        }

                        htmlToUpdate = htmlToUpdate.replace(regex, value);
                    }
                });
            }

            // This handles "Blueprint Mode" AND any missing variables in specific themes
            const pillRegex = new RegExp('{' + '{([a-zA-Z0-9_]+?)}' + '}', 'g');

            htmlToUpdate = htmlToUpdate.replace(pillRegex, (match, key) => {
                const cleanName = key.replace(/_/g, ' ');

                if (key.includes('list') || key.includes('step')) {
                    return `<span class="variable-pill variable-list">${cleanName}</span>`;
                }
                return `<span class="variable-pill">${cleanName}</span>`;
            });

            // parens styling
            if (slot.closest('ul') || slot.closest('.recipe-ingredients')) {
                htmlToUpdate = htmlToUpdate.replace(/\(([^)<]+)\)(?![^<]*>)/g, '<span class="paren">($1)</span>');
                }

            // Render
            slot.innerHTML = htmlToUpdate;
            slot.classList.remove('changed');
            void slot.offsetWidth;
            slot.classList.add('changed');
        });
    }

    const urlParams = new URLSearchParams(window.location.search);
    const themeName = urlParams.get('vibe');

    if (Object.keys(variations).includes(themeName)) {
        applyVariation(themeName, document.getElementById(themeName));
    } else {
        applyVariation('Blueprint', document.querySelector('.vibe-btn.active'));
    }
});
</script>

                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2025 <a href="../..">Josh Izaac</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>


  <script type="text/javascript">
    window.addEventListener('load', function(){
      var e = document.querySelectorAll(".email");
      for (var i = 0; i < e.length; i++) {
        var email = e[i].getAttribute("data-email")
        var title = e[i].getAttribute("data-title")
        if (email){
          e[i].href = email.split("").reverse().join("");
          e[i].removeAttribute("data-email");
          e[i].removeAttribute("data-title");
          e[i].removeAttribute("class");
          if (title){
            e[i].setAttribute("title", title);
          }
          else{
            e[i].removeAttribute("title");
          }
        }
      }
    })
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const ninja = document.querySelector('ninja-keys');

        if (ninja) {
            // 1. Load your JSON index
            fetch('/search.json')
                .then(response => response.json())
                .then(data => {
                    // 2. Transform into Ninja Keys format
                    const menuItems = data.map(item => ({
                        id: item.url,
                        title: item.title,
                        section: item.type, // Groups results by 'Recipe' vs 'Page'
                        keywords: item.keywords,
                        handler: () => {
                            window.location.href = item.url;
                        }
                    }));

                    // 3. Add static actions (Optional)
                    // e.g., Dark Mode toggle, Home button
                    menuItems.push({
                        id: 'home',
                        title: 'Go to Home',
                        section: 'Navigation',
                        hotkey: 'cmd+h',
                        handler: () => { window.location.href = '/'; }
                    });

                    // 4. Give data to Ninja Keys
                    ninja.data = menuItems;
                })
                .catch(err => console.error("Failed to load search index:", err));
        }
    });
  </script>


  <ninja-keys placeholder="Search..." hideBreadcrumbs></ninja-keys>
</body>
</html>